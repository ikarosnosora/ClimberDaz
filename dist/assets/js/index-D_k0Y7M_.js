const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/activity-features-BeCPKsHJ.js","assets/js/auth-features-B9i09fKj.js","assets/js/utils-C8L9ZeeV.js","assets/js/notifications-DK5Y3Ipx.js","assets/js/router-DIp0qzM7.js","assets/js/react-core-DJd1KkWy.js","assets/js/storage-BRXjPTYW.js","assets/js/state-Dl9MXZu6.js","assets/js/datetime-C5xEksKA.js","assets/js/http-client-CnGGTTUv.js","assets/styles/auth-features-Dl3Xsho6.css","assets/styles/activity-features-CMH0Kke3.css","assets/js/CommentBoard-rCSZhsR8.js","assets/js/review-features-auNYMXwN.js","assets/js/MyActivities-ndp8or4b.js","assets/js/admin-features-B8aeFEXe.js"])))=>i.map(i=>d[i]);
import{j as e,h as t,l as s,E as i,N as r,m as a,n,S as o,_ as c}from"./auth-features-B9i09fKj.js";import{a as l}from"./react-core-DJd1KkWy.js";import{R as d,r as m,c as u,d as j,N as p,B as x}from"./router-DIp0qzM7.js";import"./activity-features-BeCPKsHJ.js";import{j as h}from"./utils-C8L9ZeeV.js";import"./state-Dl9MXZu6.js";import"./datetime-C5xEksKA.js";import"./http-client-CnGGTTUv.js";import"./notifications-DK5Y3Ipx.js";import"./storage-BRXjPTYW.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var f,v={},y=function(){if(f)return v;f=1;var e=l();return v.createRoot=e.createRoot,v.hydrateRoot=e.hydrateRoot,v}();const b=d.memo((()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-500 mb-4"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-2xl animate-bounce",children:"🧗‍♀️"})]}),e.jsx("p",{className:"text-gray-600 font-medium mt-4",children:"加载中..."})]})));b.displayName="Loading";const _=d.memo((()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-pulse rounded-full h-20 w-20 bg-blue-200 mb-4"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-3xl",children:"🧗‍♀️"})]}),e.jsx("p",{className:"text-gray-600 font-medium mt-4",children:"ClimberDaz 启动中..."})]})));_.displayName="AppLoading";const g=(t,s)=>d.lazy((async()=>{try{return await t()}catch(i){return{default:()=>e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"text-red-500 mb-2",children:"⚠️"}),e.jsx("p",{className:"text-gray-600",children:s}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"重新加载"})]})}}})),E=g((()=>c((()=>import("./activity-features-BeCPKsHJ.js").then((e=>e.a))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),"活动列表加载失败"),N=g((()=>c((()=>import("./auth-features-B9i09fKj.js").then((e=>e.o))),__vite__mapDeps([1,2,3,4,5,6,0,7,11,8,9,10]))),"登录页面加载失败"),w=g((()=>c((()=>import("./activity-features-BeCPKsHJ.js").then((e=>e.b))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),"活动详情加载失败"),L=g((()=>c((()=>import("./auth-features-B9i09fKj.js").then((e=>e.q))),__vite__mapDeps([1,2,3,4,5,6,0,7,11,8,9,10]))),"个人资料加载失败"),S=g((()=>c((()=>import("./CommentBoard-rCSZhsR8.js")),__vite__mapDeps([12,1,2,3,4,5,6,0,7,11,8,9,10]))),"评论区加载失败"),A=g((()=>c((()=>import("./review-features-auNYMXwN.js")),__vite__mapDeps([13,1,2,3,4,5,6,0,7,11,8,9,10]))),"评价表单加载失败"),k=g((()=>c((()=>import("./MyActivities-ndp8or4b.js")),__vite__mapDeps([14,1,2,3,4,5,6,0,7,11,8,9,10]))),"我的活动加载失败"),R=g((()=>c((()=>import("./admin-features-B8aeFEXe.js")),__vite__mapDeps([15,1,2,3,4,5,6,0,7,11,8,9,10]))),"管理面板加载失败"),D=g((()=>c((()=>import("./activity-features-BeCPKsHJ.js").then((e=>e.C))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),"创建活动加载失败"),P=d.memo((()=>{const{isAuthenticated:c}=t(),[l,d]=m.useState(!1),x=m.useCallback(((e,t)=>{}),[]);m.useEffect((()=>{x("Component mounted"),x("Authentication state:",{isAuthenticated:c,isHydrated:l})}),[c,l,x]),m.useEffect((()=>{x("Starting hydration...");const e=setTimeout((()=>{x("Hydration complete"),d(!0)}),100);return()=>{clearTimeout(e)}}),[x]);const h=m.useCallback((()=>{"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{x("Service Worker registered successfully:",e),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&x("New content available, reload to update")}))}))})).catch((e=>{}))}))}),[x]);m.useEffect((()=>{h()}),[h]);const f=m.useMemo((()=>({activityList:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(E,{})}),activityDetail:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(w,{})}),profile:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(L,{})}),myActivities:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(k,{})}),createActivity:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(D,{})}),commentBoard:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(S,{})}),reviewForm:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(A,{})}),admin:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(R,{})})})),[]);return l?c?(x("User authenticated, showing main app"),e.jsx(s,{children:e.jsxs(i,{children:[e.jsx("div",{className:"min-h-screen",id:"main-content",children:e.jsxs(u,{children:[e.jsxs(j,{path:"/",element:e.jsx(a,{}),children:[e.jsx(j,{index:!0,element:f.activityList}),e.jsx(j,{path:"activities",element:f.activityList}),e.jsx(j,{path:"activity/:id",element:f.activityDetail}),e.jsx(j,{path:"profile",element:f.profile}),e.jsx(j,{path:"my-activities",element:f.myActivities}),e.jsx(j,{path:"create-activity",element:f.createActivity}),e.jsx(j,{path:"comment-board/:activityId",element:f.commentBoard}),e.jsx(j,{path:"review/:activityId",element:f.reviewForm}),e.jsx(j,{path:"admin",element:f.admin})]}),e.jsx(j,{path:"*",element:e.jsx(p,{to:"/",replace:!0})})]})}),e.jsx(n,{}),e.jsx(o,{}),e.jsx(r,{})]})})):(x("User not authenticated, showing login"),e.jsx(s,{children:e.jsxs(i,{children:[e.jsx("div",{className:"min-h-screen",id:"main-content",children:e.jsx(m.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(N,{})})}),e.jsx(r,{})]})})):(x("Showing app loading screen"),e.jsx(_,{}))})),T=console.error,I=console.warn,O=["findDOMNode is deprecated in StrictMode","React DevTools global hook","Fast Refresh is not compatible","[DEPRECATED] Use `createWithEqualityFn`"];console.error=(...e)=>{const t=e.map((e=>{try{return String(e)}catch(t){return""}})).join(" ");O.some((e=>t.includes(e)))||T.apply(console,e)},console.warn=(...e)=>{const t=e.map((e=>{try{return String(e)}catch(t){return""}})).join(" ");O.some((e=>t.includes(e)))||I.apply(console,e)},"true"===localStorage.getItem("enablePerformanceMonitoring")&&h.start("app-initialization"),y.createRoot(document.getElementById("root")).render(e.jsx(x,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(P,{})})),"true"===localStorage.getItem("enablePerformanceMonitoring")&&(setTimeout((()=>{h.end("app-initialization")}),100),window.addEventListener("load",(()=>{setTimeout((()=>{h.getWebVitals()}),1e3)})),window.addEventListener("beforeunload",(()=>{h.cleanup()})));

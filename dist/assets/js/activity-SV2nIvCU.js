const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/CreateActivity-DVt4jW8_.js","assets/js/router-vendor-Cs108294.js","assets/js/react-vendor-BRaCMJ4j.js","assets/js/utils-BEM4FbqU.js","assets/js/state-vendor-DHqOUJve.js","assets/styles/CreateActivity-DpdgHOD0.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{R as r,r as a,u as n,a as s,O as i,b as l}from"./router-vendor-Cs108294.js";import{s as o,c,a as d,b as u,d as m,e as h}from"./utils-BEM4FbqU.js";import{r as p,g as f}from"./react-vendor-BRaCMJ4j.js";import{c as g,u as x}from"./state-vendor-DHqOUJve.js";var v,y,b={exports:{}},w={};var j=(y||(y=1,b.exports=function(){if(v)return w;v=1;var e=p(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,r,i){var l,o={},c=null,d=null;for(l in void 0!==i&&(c=""+i),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(d=r.ref),r)a.call(r,l)&&!s.hasOwnProperty(l)&&(o[l]=r[l]);if(e&&e.defaultProps)for(l in r=e.defaultProps)void 0===o[l]&&(o[l]=r[l]);return{$$typeof:t,type:e,key:c,ref:d,props:o,_owner:n.current}}return w.Fragment=r,w.jsx=i,w.jsxs=i,w}()),b.exports);const N={},_=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),n=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));a=e(t.map((e=>{if((e=function(e){return"/"+e}(e))in N)return;N[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise(((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},{useDebugValue:A}=r,{useSyncExternalStoreWithSelector:S}=x,k=e=>e;const E=(e,t)=>{const r=g(e),a=(e,a=t)=>function(e,t=k,r){const a=S(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return A(a),a}(r,e,a);return Object.assign(a,r),a},$={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},C=new Map,T=e=>{const t=C.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},O=(e,t={})=>(r,a,n)=>{const{enabled:s,anonymousActionType:i,store:l,...o}=t;let c;try{c=(null!=s?s:"production"!==($?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(f){}if(!c)return e(r,a,n);const{connection:d,...u}=((e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};const a=C.get(r.name);if(a)return{type:"tracked",store:e,...a};const n={connection:t.connect(r),stores:{}};return C.set(r.name,n),{type:"tracked",store:e,...n}})(l,c,o);let m=!0;n.setState=(e,t,s)=>{const c=r(e,t);if(!m)return c;const u=void 0===s?{type:i||"anonymous"}:"string"==typeof s?{type:s}:s;return void 0===l?(null==d||d.send(u,a()),c):(null==d||d.send({...u,type:`${l}/${u.type}`},{...T(o.name),[l]:n.getState()}),c)};const h=(...e)=>{const t=m;m=!1,r(...e),m=t},p=e(n.setState,a,n);if("untracked"===u.type?null==d||d.init(p):(u.stores[u.store]=n,null==d||d.init(Object.fromEntries(Object.entries(u.stores).map((([e,t])=>[e,e===u.store?p:t.getState()]))))),n.dispatchFromDevtools&&"function"==typeof n.dispatch){let e=!1;const t=n.dispatch;n.dispatch=(...r)=>{"production"===($?"production":void 0)||"__setState"!==r[0].type||e||(e=!0),t(...r)}}return d.subscribe((e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return D(e.payload,(e=>{if("__setState"!==e.type)n.dispatchFromDevtools&&"function"==typeof n.dispatch&&n.dispatch(e);else{if(void 0===l)return void h(e.state);Object.keys(e.state).length;const t=e.state[l];if(null==t)return;JSON.stringify(n.getState())!==JSON.stringify(t)&&h(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return h(p),void 0===l?null==d?void 0:d.init(n.getState()):null==d?void 0:d.init(T(o.name));case"COMMIT":return void 0===l?void(null==d||d.init(n.getState())):null==d?void 0:d.init(T(o.name));case"ROLLBACK":return D(e.state,(e=>{if(void 0===l)return h(e),void(null==d||d.init(n.getState()));h(e[l]),null==d||d.init(T(o.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return D(e.state,(e=>{void 0!==l?JSON.stringify(n.getState())!==JSON.stringify(e[l])&&h(e[l]):h(e)}));case"IMPORT_STATE":{const{nextLiftedState:r}=e.payload,a=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!a)return;return h(void 0===l?a:a[l]),void(null==d||d.send(null,r))}case"PAUSE_RECORDING":return m=!m}return}})),p},D=(e,t)=>{let r;try{r=JSON.parse(e)}catch(a){}void 0!==r&&t(r)},M=e=>(t,r,a)=>{const n=a.subscribe;a.subscribe=(e,t,r)=>{let s=e;if(t){const n=(null==r?void 0:r.equalityFn)||Object.is;let i=e(a.getState());s=r=>{const a=e(r);if(!n(i,a)){const e=i;t(i=a,e)}},(null==r?void 0:r.fireImmediately)&&t(i,i)}return n(s)};return e(t,r,a)};function L(e,t){let r;try{r=e()}catch(a){return}return{getItem:e=>{var t;const a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}const I=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>I(e)(r),catch(e){return this}}}catch(r){return{then(e){return this},catch:e=>I(e)(r)}}},R=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(r,a,n)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const l=new Set,o=new Set;let c;try{c=s.getStorage()}catch(g){}if(!c)return e(((...e)=>{r(...e)}),a,n);const d=I(s.serialize),u=()=>{const e=s.partialize({...a()});let t;const r=d({state:e,version:s.version}).then((e=>c.setItem(s.name,e))).catch((e=>{t=e}));if(t)throw t;return r},m=n.setState;n.setState=(e,t)=>{m(e,t),u()};const h=e(((...e)=>{r(...e),u()}),a,n);let p;const f=()=>{var e;if(!c)return;i=!1,l.forEach((e=>e(a())));const t=(null==(e=s.onRehydrateStorage)?void 0:e.call(s,a()))||void 0;return I(c.getItem.bind(c))(s.name).then((e=>{if(e)return s.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version)}})).then((e=>{var t;return p=s.merge(e,null!=(t=a())?t:h),r(p,!0),u()})).then((()=>{null==t||t(p,void 0),i=!0,o.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return n.persist={setOptions:e=>{s={...s,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},f(),p||h})(e,t):((e,t)=>(r,a,n)=>{let s={storage:L((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const l=new Set,o=new Set;let c=s.storage;if(!c)return e(((...e)=>{r(...e)}),a,n);const d=()=>{const e=s.partialize({...a()});return c.setItem(s.name,{state:e,version:s.version})},u=n.setState;n.setState=(e,t)=>{u(e,t),d()};const m=e(((...e)=>{r(...e),d()}),a,n);let h;n.getInitialState=()=>m;const p=()=>{var e,t;if(!c)return;i=!1,l.forEach((e=>{var t;return e(null!=(t=a())?t:m)}));const n=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=a())?e:m))||void 0;return I(c.getItem.bind(c))(s.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate)return[!0,s.migrate(e.state,e.version)]}return[!1,void 0]})).then((e=>{var t;const[n,i]=e;if(h=s.merge(i,null!=(t=a())?t:m),r(h,!0),n)return d()})).then((()=>{null==n||n(h,void 0),h=a(),i=!0,o.forEach((e=>e(h)))})).catch((e=>{null==n||n(void 0,e)}))};return n.persist={setOptions:e=>{s={...s,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},s.skipHydration||p(),h||m})(e,t);var P=Symbol.for("immer-nothing"),U=Symbol.for("immer-draftable"),B=Symbol.for("immer-state");function Y(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var z=Object.getPrototypeOf;function V(e){return!!e&&!!e[B]}function G(e){var t;return!!e&&(H(e)||Array.isArray(e)||!!e[U]||!!(null==(t=e.constructor)?void 0:t[U])||q(e)||Q(e))}var F=Object.prototype.constructor.toString();function H(e){if(!e||"object"!=typeof e)return!1;const t=z(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===F}function W(e,t){0===J(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,a)=>t(a,r,e)))}function J(e){const t=e[B];return t?t.type_:Array.isArray(e)?1:q(e)?2:Q(e)?3:0}function K(e,t){return 2===J(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t,r){const a=J(e);2===a?e.set(t,r):3===a?e.add(r):e[t]=r}function q(e){return e instanceof Map}function Q(e){return e instanceof Set}function X(e){return e.copy_||e.base_}function ee(e,t){if(q(e))return new Map(e);if(Q(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=H(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[B];let r=Reflect.ownKeys(t);for(let a=0;a<r.length;a++){const n=r[a],s=t[n];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[n]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[n]})}return Object.create(z(e),t)}{const t=z(e);if(null!==t&&r)return{...e};const a=Object.create(t);return Object.assign(a,e)}}function te(e,t=!1){return ae(e)||V(e)||!G(e)||(J(e)>1&&(e.set=e.add=e.clear=e.delete=re),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>te(t,!0)))),e}function re(){Y(2)}function ae(e){return Object.isFrozen(e)}var ne,se={};function ie(e){const t=se[e];return t||Y(0),t}function le(){return ne}function oe(e,t){t&&(ie("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ce(e){de(e),e.drafts_.forEach(me),e.drafts_=null}function de(e){e===ne&&(ne=e.parent_)}function ue(e){return ne={drafts_:[],parent_:ne,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function me(e){const t=e[B];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function he(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[B].modified_&&(ce(t),Y(4)),G(e)&&(e=pe(t,e),t.parent_||ge(t,e)),t.patches_&&ie("Patches").generateReplacementPatches_(r[B].base_,e,t.patches_,t.inversePatches_)):e=pe(t,r,[]),ce(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==P?e:void 0}function pe(e,t,r){if(ae(t))return t;const a=t[B];if(!a)return W(t,((n,s)=>fe(e,a,t,n,s,r))),t;if(a.scope_!==e)return t;if(!a.modified_)return ge(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let n=t,s=!1;3===a.type_&&(n=new Set(t),t.clear(),s=!0),W(n,((n,i)=>fe(e,a,t,n,i,r,s))),ge(e,t,!1),r&&e.patches_&&ie("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function fe(e,t,r,a,n,s,i){if(V(n)){const i=pe(e,n,s&&t&&3!==t.type_&&!K(t.assigned_,a)?s.concat(a):void 0);if(Z(r,a,i),!V(i))return;e.canAutoFreeze_=!1}else i&&r.add(n);if(G(n)&&!ae(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;pe(e,n),t&&t.scope_.parent_||"symbol"==typeof a||!Object.prototype.propertyIsEnumerable.call(r,a)||ge(e,n)}}function ge(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&te(t,r)}var xe={get(e,t){if(t===B)return e;const r=X(e);if(!K(r,t))return function(e,t,r){var a;const n=be(t,r);return n?"value"in n?n.value:null==(a=n.get)?void 0:a.call(e.draft_):void 0}(e,r,t);const a=r[t];return e.finalized_||!G(a)?a:a===ye(e.base_,t)?(je(e),e.copy_[t]=Ne(a,e)):a},has:(e,t)=>t in X(e),ownKeys:e=>Reflect.ownKeys(X(e)),set(e,t,r){const a=be(X(e),t);if(null==a?void 0:a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const a=ye(X(e),t),i=null==a?void 0:a[B];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((n=r)===(s=a)?0!==n||1/n==1/s:n!=n&&s!=s)&&(void 0!==r||K(e.base_,t)))return!0;je(e),we(e)}var n,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ye(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,je(e),we(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=X(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:a.enumerable,value:r[t]}:a},defineProperty(){Y(11)},getPrototypeOf:e=>z(e.base_),setPrototypeOf(){Y(12)}},ve={};function ye(e,t){const r=e[B];return(r?X(r):e)[t]}function be(e,t){if(!(t in e))return;let r=z(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=z(r)}}function we(e){e.modified_||(e.modified_=!0,e.parent_&&we(e.parent_))}function je(e){e.copy_||(e.copy_=ee(e.base_,e.scope_.immer_.useStrictShallowCopy_))}W(xe,((e,t)=>{ve[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ve.deleteProperty=function(e,t){return ve.set.call(this,e,t,void 0)},ve.set=function(e,t,r){return xe.set.call(this,e[0],t,r,e[0])};function Ne(e,t){const r=q(e)?ie("MapSet").proxyMap_(e,t):Q(e)?ie("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:le(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=a,s=xe;r&&(n=[a],s=ve);const{revoke:i,proxy:l}=Proxy.revocable(n,s);return a.draft_=l,a.revoke_=i,l}(e,t);return(t?t.scope_:le()).drafts_.push(r),r}function _e(e){if(!G(e)||ae(e))return e;const t=e[B];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=ee(e,t.scope_.immer_.useStrictShallowCopy_)}else r=ee(e,!0);return W(r,((e,t)=>{Z(r,e,_e(t))})),t&&(t.finalized_=!1),r}var Ae=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const a=this;return function(e=r,...n){return a.produce(e,(e=>t.call(this,e,...n)))}}let a;if("function"!=typeof t&&Y(6),void 0!==r&&"function"!=typeof r&&Y(7),G(e)){const n=ue(this),s=Ne(e,void 0);let i=!0;try{a=t(s),i=!1}finally{i?ce(n):de(n)}return oe(n,r),he(a,n)}if(!e||"object"!=typeof e){if(a=t(e),void 0===a&&(a=e),a===P&&(a=void 0),this.autoFreeze_&&te(a,!0),r){const t=[],n=[];ie("Patches").generateReplacementPatches_(e,a,t,n),r(t,n)}return a}Y(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,a;return[this.produce(e,t,((e,t)=>{r=e,a=t})),r,a]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){G(e)||Y(8),V(e)&&(e=function(e){V(e)||Y(10);return _e(e)}(e));const t=ue(this),r=Ne(e,void 0);return r[B].isManual_=!0,de(t),r}finishDraft(e,t){const r=e&&e[B];r&&r.isManual_||Y(9);const{scope_:a}=r;return oe(a,t),he(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(0===a.path.length&&"replace"===a.op){e=a.value;break}}r>-1&&(t=t.slice(r+1));const a=ie("Patches").applyPatches_;return V(e)?a(e,t):this.produce(e,(e=>a(e,t)))}},Se=Ae.produce;Ae.produceWithPatches.bind(Ae),Ae.setAutoFreeze.bind(Ae),Ae.setUseStrictShallowCopy.bind(Ae),Ae.applyPatches.bind(Ae),Ae.createDraft.bind(Ae),Ae.finishDraft.bind(Ae);const ke=e=>(t,r,a)=>(a.setState=(e,r,...a)=>{const n="function"==typeof e?Se(e):e;return t(n,r,...a)},e(a.setState,r,a));var Ee=(e=>(e.GOOD="GOOD",e.BAD="BAD",e.NO_SHOW="NO_SHOW",e))(Ee||{}),$e=(e=>(e.MEET_AT_ENTRANCE="MEET_AT_ENTRANCE",e.FIRST_COME_FIRST_CLIMB="FIRST_COME_FIRST_CLIMB",e))($e||{}),Ce=(e=>(e.OPEN="OPEN",e.FULL="FULL",e.ONGOING="ONGOING",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e))(Ce||{}),Te=(e=>(e.FREE="FREE",e.AA="AA",e.HOST_TREAT="HOST_TREAT",e))(Te||{}),Oe=(e=>(e.BOULDERING="BOULDERING",e.TOP_ROPE_AUTO_BELAY="TOP_ROPE_AUTO_BELAY",e.TOP_ROPE_MANUAL_BELAY="TOP_ROPE_MANUAL_BELAY",e.LEAD_CLIMBING="LEAD_CLIMBING",e.OUTDOOR="OUTDOOR",e.TRAINING="TRAINING",e))(Oe||{}),De=(e=>(e.V0_V2="V0-V2",e.V3_V5="V3-V5",e.V6_V7="V6-V7",e.V8_PLUS="V8+",e.V_OPEN="V_OPEN",e.YDS_5_5_5_8="YDS_5.5-5.8",e.YDS_5_9_5_10D="YDS_5.9-5.10d",e.YDS_5_11A_5_11D="YDS_5.11a-5.11d",e.YDS_5_12A_5_12D="YDS_5.12a-5.12d",e.YDS_5_13_PLUS="YDS_5.13+",e.YDS_OPEN="YDS_OPEN",e))(De||{}),Me=(e=>(e.SHOES="SHOES",e.HARNESS="HARNESS",e.ROPE="ROPE",e.QUICKDRAWS="QUICKDRAWS",e.CHALK="CHALK",e.BELAY_DEVICE="BELAY_DEVICE",e.HELMET="HELMET",e))(Me||{});const Le={receiveNewCommentNotifications:!0,receiveActivityJoinNotifications:!0,receiveActivityUpdateNotifications:!0,receiveSystemAnnouncements:!0},Ie="climberdaz_preferences",Re={UNAUTHORIZED:"登录已过期，请重新登录",SERVER_ERROR:"服务器错误，请稍后重试"},Pe={LOGIN_SUCCESS:"登录成功",LOGOUT_SUCCESS:"退出登录成功",PROFILE_UPDATED:"个人信息更新成功",ACTIVITY_CREATED:"活动发布成功",ACTIVITY_JOINED:"成功加入活动",ACTIVITY_LEFT:"成功退出活动",REVIEW_SUBMITTED:"评价提交成功"},Ue={NICKNAME:{MIN_LENGTH:2,MAX_LENGTH:20},COMMENT:{MAX_LENGTH:200}},Be=[{openid:"user1",nickname:"RockClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RockClimber",level:5,gearTags:[Me.SHOES,Me.HARNESS,Me.CHALK],createdAt:new Date("2024-01-15"),climbingAge:3,introduction:"热爱攀岩的程序员，喜欢挑战V6-V8的线路",city:"北京",frequentlyVisitedGyms:["岩时攀岩馆（望京店）","MWA攀岩馆"],climbingPreferences:[Oe.BOULDERING,Oe.LEAD_CLIMBING],notificationPreferences:Le,role:"user",isBanned:!1},{openid:"user2",nickname:"NewbieClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=NewbieClimber",level:2,gearTags:[Me.SHOES],createdAt:new Date("2024-03-10"),climbingAge:1,introduction:"攀岩新手，希望能找到一起学习的朋友",city:"上海",frequentlyVisitedGyms:["峭壁芭蕾攀岩馆"],climbingPreferences:[Oe.BOULDERING,Oe.TRAINING],notificationPreferences:Le,role:"user",isBanned:!1},{openid:"user3",nickname:"AdminUser",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AdminUser",level:8,gearTags:[Me.SHOES,Me.HARNESS,Me.ROPE,Me.QUICKDRAWS,Me.BELAY_DEVICE],createdAt:new Date("2023-12-01"),climbingAge:5,introduction:"平台管理员，资深攀岩爱好者",city:"深圳",frequentlyVisitedGyms:["KAILAS攀岩馆"],climbingPreferences:[Oe.BOULDERING,Oe.LEAD_CLIMBING,Oe.OUTDOOR],notificationPreferences:Le,role:"admin",isBanned:!1},{openid:"user4",nickname:"BannedUserExample",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=BannedUserExample",level:1,gearTags:[],createdAt:new Date("2024-04-01"),climbingAge:0,city:"广州",notificationPreferences:Le,role:"user",isBanned:!0}],Ye=[{id:"1",hostId:"user1",title:"周末一起攀岩吧！V4-V6 level",datetime:new Date("2025-06-01T14:00:00"),locationText:"岩时攀岩馆（望京店）",lat:39.9884,lng:116.4716,meetMode:$e.MEET_AT_ENTRANCE,isPrivate:!1,types:[Oe.BOULDERING],grades:[De.V3_V5,De.V6_V7],costMode:Te.AA,slotMax:4,status:Ce.OPEN,createdAt:new Date("2024-05-15"),participantIds:["user1","user2"],participantCount:2,host:Be[0],distance:2.5},{id:"2",hostId:"user2",title:"新手友好局，一起学习抱石",datetime:new Date("2025-06-02T10:00:00"),locationText:"MWA攀岩馆",lat:39.9304,lng:116.4316,meetMode:$e.FIRST_COME_FIRST_CLIMB,isPrivate:!1,types:[Oe.BOULDERING,Oe.TRAINING],grades:[De.V0_V2],costMode:Te.FREE,slotMax:6,status:Ce.OPEN,createdAt:new Date("2024-05-16"),participantIds:["user2","user3","user1"],participantCount:3,host:Be[1],distance:5.2},{id:"3",hostId:"user3",title:"先锋攀登技术分享",datetime:new Date("2025-06-03T19:00:00"),locationText:"KAILAS攀岩馆",lat:40.0084,lng:116.4816,meetMode:$e.MEET_AT_ENTRANCE,isPrivate:!1,types:[Oe.LEAD_CLIMBING,Oe.TRAINING],grades:[De.YDS_5_9_5_10D,De.YDS_5_11A_5_11D],costMode:Te.HOST_TREAT,slotMax:8,status:Ce.OPEN,createdAt:new Date("2024-05-17"),participantIds:["user3"],participantCount:1,host:Be[2],distance:1.8},{id:"4",hostId:"user1",title:"户外攀岩 - 怀柔线路探索",datetime:new Date("2025-06-05T08:00:00"),locationText:"怀柔区攀岩场地",lat:40.3916,lng:116.631,meetMode:$e.MEET_AT_ENTRANCE,isPrivate:!1,types:[Oe.OUTDOOR],grades:[De.YDS_5_5_5_8,De.YDS_5_9_5_10D],costMode:Te.AA,slotMax:4,status:Ce.FULL,createdAt:new Date("2024-05-18"),participantIds:["user1","user2","user3","user4"],participantCount:4,host:Be[0],distance:45.3},{id:"5",hostId:"user2",title:"周中放松攀爬",datetime:new Date("2025-05-20T18:30:00"),locationText:"峭壁芭蕾攀岩馆",lat:31.2304,lng:121.4737,meetMode:$e.FIRST_COME_FIRST_CLIMB,isPrivate:!1,types:[Oe.BOULDERING],grades:[De.V0_V2,De.V3_V5],costMode:Te.AA,slotMax:5,status:Ce.COMPLETED,createdAt:new Date("2024-05-10"),participantIds:["user2","user1"],participantCount:2,host:Be[1],distance:8.7}],ze=[{id:"1",title:"🎉 ClimberDaz 正式上线！欢迎各位岩友",content:"经过紧张的开发和测试，ClimberDaz攀岩找搭子平台正式上线啦！感谢大家的耐心等待。现在你可以轻松找到攀岩伙伴，创建活动，分享攀岩经验。让我们一起在这个平台上建立一个活跃的攀岩社区！",startAt:new Date("2024-05-01"),endAt:new Date("2025-12-31"),weight:10,createdAt:new Date("2024-05-01")},{id:"2",title:"📢 本周六有官方组织的新手教学活动",content:"为了帮助更多新朋友快速入门攀岩运动，我们将在本周六下午2点在岩时攀岩馆举办新手教学活动。活动包括：基础攀爬技巧、安全知识讲解、装备介绍等。活动免费，欢迎新手朋友参加！",startAt:new Date("2024-05-20"),endAt:new Date("2024-06-30"),weight:8,createdAt:new Date("2024-05-20")},{id:"3",title:"⚠️ 平台维护通知",content:"为了提供更好的服务，平台将在本周日凌晨2:00-4:00进行系统维护升级。维护期间可能无法正常访问，给您带来的不便敬请谅解。",startAt:new Date("2024-05-25"),endAt:new Date("2024-05-26"),weight:6,createdAt:new Date("2024-05-25")}],Ve=[{openid:"user1",nickname:"RockClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RockClimber",gearTags:["SHOES"],createdAt:new Date,role:"user",isBanned:!1,climbingAge:3,city:"北京",frequentlyVisitedGyms:["岩时攀岩馆（望京店）"],climbingPreferences:["BOULDERING"],notificationPreferences:Le},{openid:"user2",nickname:"NewbieClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=NewbieClimber",gearTags:[],createdAt:new Date,role:"user",isBanned:!1,climbingAge:1,city:"上海",notificationPreferences:Le},{openid:"user3",nickname:"AdminUser",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AdminUser",gearTags:[],createdAt:new Date,role:"admin",isBanned:!1,notificationPreferences:Le}],Ge=E(O(R(M(ke(((e,t)=>({user:null,allUsers:Ve,isAuthenticated:!1,isLoading:!1,activities:Ye,currentActivity:null,totalActivities:Ye.length,isLoadingActivities:!1,searchText:"",selectedTypes:[],selectedGrades:[],announcements:ze,isLoadingAnnouncements:!1,error:null,theme:"light",setUser:t=>e((e=>{e.user=t?{...t,notificationPreferences:t.notificationPreferences||Le}:null,e.isAuthenticated=!!t})),logout:()=>e((e=>{e.user=null,e.isAuthenticated=!1,e.activities=[],e.currentActivity=null,e.totalActivities=0,e.searchText="",e.selectedTypes=[],e.selectedGrades=[]})),setAllUsers:t=>e((e=>{e.allUsers=t.map((e=>({...e,notificationPreferences:e.notificationPreferences||Le})))})),updateUserStatus:(t,r)=>e((e=>{var a;const n=e.allUsers.findIndex((e=>e.openid===t));-1!==n&&Object.assign(e.allUsers[n],r),(null==(a=e.user)?void 0:a.openid)===t&&Object.assign(e.user,r)})),updateUserProfile:t=>e((e=>{if(e.user){Object.assign(e.user,t);const r=e.allUsers.findIndex((t=>t.openid===e.user.openid));-1!==r&&Object.assign(e.allUsers[r],t)}})),updateUserNotificationPreferences:t=>e((e=>{e.user&&e.user.notificationPreferences&&Object.assign(e.user.notificationPreferences,t)})),setUserLoading:t=>e((e=>{e.isLoading=t})),setActivities:t=>e((e=>{e.activities=t,e.totalActivities=t.length})),setCurrentActivity:t=>e((e=>{e.currentActivity=t})),addActivity:t=>e((e=>{e.activities.some((e=>e.id===t.id))||(e.activities.unshift(t),e.totalActivities+=1)})),updateActivity:(t,r)=>e((e=>{var a;const n=e.activities.findIndex((e=>e.id===t));-1!==n&&Object.assign(e.activities[n],r),(null==(a=e.currentActivity)?void 0:a.id)===t&&Object.assign(e.currentActivity,r)})),removeActivity:t=>e((e=>{var r;const a=e.activities.length;e.activities=e.activities.filter((e=>e.id!==t)),e.activities.length<a&&(e.totalActivities=Math.max(0,e.totalActivities-1)),(null==(r=e.currentActivity)?void 0:r.id)===t&&(e.currentActivity=null)})),joinActivity:async(t,r)=>{try{await new Promise(((e,t)=>{const r=setTimeout((()=>{e(void 0)}),500);Math.random()<.05&&(clearTimeout(r),t(new Error("Network error")))})),e((e=>{var a;const n=e=>{var t;return!(null==(t=e.participantIds)?void 0:t.includes(r))&&(e.participantCount||0)<e.slotMax&&(e.participantIds=[...e.participantIds||[],r],e.participantCount=(e.participantCount||0)+1,!0)},s=e.activities.findIndex((e=>e.id===t));-1!==s&&n(e.activities[s]),(null==(a=e.currentActivity)?void 0:a.id)===t&&n(e.currentActivity)}))}catch(a){throw a}},leaveActivity:async(t,r)=>{try{await new Promise(((e,t)=>{const r=setTimeout((()=>{e(void 0)}),500);Math.random()<.05&&(clearTimeout(r),t(new Error("Network error")))})),e((e=>{var a;const n=e=>{var t;return!!(null==(t=e.participantIds)?void 0:t.includes(r))&&(e.participantIds=e.participantIds.filter((e=>e!==r)),e.participantCount=Math.max(0,(e.participantCount||0)-1),!0)},s=e.activities.findIndex((e=>e.id===t));-1!==s&&n(e.activities[s]),(null==(a=e.currentActivity)?void 0:a.id)===t&&n(e.currentActivity)}))}catch(a){throw a}},setSearchText:t=>e((e=>{e.searchText=t})),setSelectedTypes:t=>e((e=>{e.selectedTypes=t})),setSelectedGrades:t=>e((e=>{e.selectedGrades=t})),resetFilters:()=>e((e=>{e.searchText="",e.selectedTypes=[],e.selectedGrades=[]})),setActivityLoading:t=>e((e=>{e.isLoadingActivities=t})),setAnnouncements:t=>e((e=>{e.announcements=t})),setError:t=>e((e=>{e.error=t})),toggleTheme:()=>e((e=>{e.theme="light"===e.theme?"dark":"light"})),setAnnouncementLoading:t=>e((e=>{e.isLoadingAnnouncements=t}))})))),{name:Ie,partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,theme:e.theme,searchText:e.searchText,selectedTypes:e.selectedTypes,selectedGrades:e.selectedGrades}),version:1,migrate:(e,t)=>0!==t&&t?e:{...e,theme:e.theme||"light",searchText:e.searchText||"",selectedTypes:Array.isArray(e.selectedTypes)?e.selectedTypes:[],selectedGrades:Array.isArray(e.selectedGrades)?e.selectedGrades:[],user:e.user?{...e.user,notificationPreferences:e.user.notificationPreferences||Le}:null},onRehydrateStorage:()=>(e,t)=>{t&&localStorage.removeItem(Ie)}}),{name:"ClimberDaz Store",enabled:!1}),(function(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||!Object.is(e[a],t[a]))return!1;return!0})),Fe=()=>Ge((e=>({user:e.user,allUsers:e.allUsers,isAuthenticated:e.isAuthenticated,isLoading:e.isLoading}))),He=()=>Ge((e=>({activities:e.activities,currentActivity:e.currentActivity,isLoadingActivities:e.isLoadingActivities,totalActivities:e.totalActivities}))),We=()=>Ge((e=>({setUser:e.setUser,logout:e.logout,setAllUsers:e.setAllUsers,updateUserStatus:e.updateUserStatus,updateUserProfile:e.updateUserProfile,updateUserNotificationPreferences:e.updateUserNotificationPreferences,setUserLoading:e.setUserLoading}))),Je=()=>Ge((e=>({setActivities:e.setActivities,setCurrentActivity:e.setCurrentActivity,addActivity:e.addActivity,updateActivity:e.updateActivity,removeActivity:e.removeActivity,joinActivity:e.joinActivity,leaveActivity:e.leaveActivity,setActivityLoading:e.setActivityLoading})));a.lazy((()=>_((()=>import("./CreateActivity-DVt4jW8_.js")),__vite__mapDeps([0,1,2,3,4,5]))));var Ke,Ze={exports:{}};function qe(){return Ke||(Ke=1,Ze.exports=function(){var e=1e3,t=6e4,r=36e5,a="millisecond",n="second",s="minute",i="hour",l="day",o="week",c="month",d="quarter",u="year",m="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},x=function(e,t,r){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(r)+e},v={s:x,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),a=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+x(a,2,"0")+":"+x(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var a=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(a,c),s=r-n<0,i=t.clone().add(a+(s?-1:1),c);return+(-(a+(r-n)/(s?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:o,d:l,D:m,h:i,m:s,s:n,ms:a,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=g;var w="$isDayjsObject",j=function(e){return e instanceof S||!(!e||!e[w])},N=function e(t,r,a){var n;if(!t)return y;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(n=s),r&&(b[s]=r,n=s);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var l=t.name;b[l]=t,n=l}return!a&&n&&(y=n),n||!a&&y},_=function(e,t){if(j(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},A=v;A.l=N,A.i=j,A.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function g(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var x=g.prototype;return x.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(p);if(a){var n=a[2]-1||0,s=(a[7]||"0").substring(0,3);return r?new Date(Date.UTC(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)):new Date(a[1],n,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)}}return new Date(t)}(e),this.init()},x.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},x.$utils=function(){return A},x.isValid=function(){return!(this.$d.toString()===h)},x.isSame=function(e,t){var r=_(e);return this.startOf(t)<=r&&r<=this.endOf(t)},x.isAfter=function(e,t){return _(e)<this.startOf(t)},x.isBefore=function(e,t){return this.endOf(t)<_(e)},x.$g=function(e,t,r){return A.u(e)?this[t]:this.set(r,e)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(e,t){var r=this,a=!!A.u(t)||t,d=A.p(e),h=function(e,t){var n=A.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return a?n:n.endOf(l)},p=function(e,t){return A.w(r.toDate()[e].apply(r.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},f=this.$W,g=this.$M,x=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case u:return a?h(1,0):h(31,11);case c:return a?h(1,g):h(0,g+1);case o:var y=this.$locale().weekStart||0,b=(f<y?f+7:f)-y;return h(a?x-b:x+(6-b),g);case l:case m:return p(v+"Hours",0);case i:return p(v+"Minutes",1);case s:return p(v+"Seconds",2);case n:return p(v+"Milliseconds",3);default:return this.clone()}},x.endOf=function(e){return this.startOf(e,!1)},x.$set=function(e,t){var r,o=A.p(e),d="set"+(this.$u?"UTC":""),h=(r={},r[l]=d+"Date",r[m]=d+"Date",r[c]=d+"Month",r[u]=d+"FullYear",r[i]=d+"Hours",r[s]=d+"Minutes",r[n]=d+"Seconds",r[a]=d+"Milliseconds",r)[o],p=o===l?this.$D+(t-this.$W):t;if(o===c||o===u){var f=this.clone().set(m,1);f.$d[h](p),f.init(),this.$d=f.set(m,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},x.set=function(e,t){return this.clone().$set(e,t)},x.get=function(e){return this[A.p(e)]()},x.add=function(a,d){var m,h=this;a=Number(a);var p=A.p(d),f=function(e){var t=_(h);return A.w(t.date(t.date()+Math.round(e*a)),h)};if(p===c)return this.set(c,this.$M+a);if(p===u)return this.set(u,this.$y+a);if(p===l)return f(1);if(p===o)return f(7);var g=(m={},m[s]=t,m[i]=r,m[n]=e,m)[p]||1,x=this.$d.getTime()+a*g;return A.w(x,this)},x.subtract=function(e,t){return this.add(-1*e,t)},x.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var a=e||"YYYY-MM-DDTHH:mm:ssZ",n=A.z(this),s=this.$H,i=this.$m,l=this.$M,o=r.weekdays,c=r.months,d=r.meridiem,u=function(e,r,n,s){return e&&(e[r]||e(t,a))||n[r].slice(0,s)},m=function(e){return A.s(s%12||12,e,"0")},p=d||function(e,t,r){var a=e<12?"AM":"PM";return r?a.toLowerCase():a};return a.replace(f,(function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return l+1;case"MM":return A.s(l+1,2,"0");case"MMM":return u(r.monthsShort,l,c,3);case"MMMM":return u(c,l);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(r.weekdaysMin,t.$W,o,2);case"ddd":return u(r.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(s);case"HH":return A.s(s,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return p(s,i,!0);case"A":return p(s,i,!1);case"m":return String(i);case"mm":return A.s(i,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")}))},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(a,m,h){var p,f=this,g=A.p(m),x=_(a),v=(x.utcOffset()-this.utcOffset())*t,y=this-x,b=function(){return A.m(f,x)};switch(g){case u:p=b()/12;break;case c:p=b();break;case d:p=b()/3;break;case o:p=(y-v)/6048e5;break;case l:p=(y-v)/864e5;break;case i:p=y/r;break;case s:p=y/t;break;case n:p=y/e;break;default:p=y}return h?p:A.a(p)},x.daysInMonth=function(){return this.endOf(c).$D},x.$locale=function(){return b[this.$L]},x.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),a=N(e,t,!0);return a&&(r.$L=a),r},x.clone=function(){return A.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},g}(),k=S.prototype;return _.prototype=k,[["$ms",a],["$s",n],["$m",s],["$H",i],["$W",l],["$M",c],["$y",u],["$D",m]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,S,_),e.$i=!0),_},_.locale=N,_.isDayjs=j,_.unix=function(e){return _(1e3*e)},_.en=b[y],_.Ls=b,_.p={},_}()),Ze.exports}const Qe=f(qe()),Xe=[{label:"V0-V2",value:De.V0_V2,min:"V0",max:"V2",order:0},{label:"V3-V5",value:De.V3_V5,min:"V3",max:"V5",order:1},{label:"V6-V7",value:De.V6_V7,min:"V6",max:"V7",order:2},{label:"V8+",value:De.V8_PLUS,min:"V8",max:"V8+",order:3},{label:"V-Open (不限)",value:De.V_OPEN,min:"V-Open",max:"V-Open",order:4}],et=[{label:"5.5-5.8",value:De.YDS_5_5_5_8,min:"5.5",max:"5.8",order:0},{label:"5.9-5.10d",value:De.YDS_5_9_5_10D,min:"5.9",max:"5.10d",order:1},{label:"5.11a-5.11d",value:De.YDS_5_11A_5_11D,min:"5.11a",max:"5.11d",order:2},{label:"5.12a-5.12d",value:De.YDS_5_12A_5_12D,min:"5.12a",max:"5.12d",order:3},{label:"5.13+",value:De.YDS_5_13_PLUS,min:"5.13",max:"5.13+",order:4},{label:"YDS-Open (不限)",value:De.YDS_OPEN,min:"YDS-Open",max:"YDS-Open",order:5}],tt=Xe.map((({label:e,value:t})=>({label:e,value:t}))),rt=et.map((({label:e,value:t})=>({label:e,value:t}))),at={[Oe.BOULDERING]:{label:"抱石",gradeSystem:"VScale",associatedGrades:tt},[Oe.TOP_ROPE_AUTO_BELAY]:{label:"顶绳-自动保护",gradeSystem:"YDS",associatedGrades:rt},[Oe.TOP_ROPE_MANUAL_BELAY]:{label:"顶绳-需保护",gradeSystem:"YDS",associatedGrades:rt},[Oe.LEAD_CLIMBING]:{label:"先锋",gradeSystem:"YDS",associatedGrades:rt},[Oe.OUTDOOR]:{label:"户外",gradeSystem:"Both",associatedGrades:[...tt,...rt]},[Oe.TRAINING]:{label:"训练",gradeSystem:"None",associatedGrades:[]}};Object.entries(at).map((([e,{label:t}])=>({label:t,value:e})));const nt=e=>{if(!e||0===e.length)return[];const t=e.map((e=>Xe.find((t=>t.value===e))||et.find((t=>t.value===e)))).filter((e=>!!e));if(0===t.length)return[];const r=t.sort(((e,t)=>e.order-t.order)),a=[];let n=r[0].label,s=r[0].value.startsWith("V")?"VScale":"YDS";for(let l=1;l<r.length;l++){const e=r[l],t=r[l-1],i=e.value.startsWith("V")?"VScale":"YDS";e.order===t.order+1&&i===s||(n===t.label?a.push(n):a.push(`${n}-${t.label.split(" ")[0]}`),n=e.label,s=i)}const i=r[r.length-1];return n===i.label?a.push(n):a.push(`${n}-${i.label.split(" ")[0]}`),a},st=({avatar:e,nickname:t,size:r=40,level:a,className:n="",isOnline:s=!1})=>{const i=e||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",l=!e&&t,d=l?t[0].toUpperCase():null,u=e=>{const t=e.charCodeAt(0),r=[`linear-gradient(135deg, ${c.primary[500]} 0%, ${c.primary[600]} 100%)`,`linear-gradient(135deg, ${c.secondary[400]} 0%, ${c.secondary[600]} 100%)`,`linear-gradient(135deg, ${c.secondary[500]} 0%, ${c.secondary[500]} 100%)`,`linear-gradient(135deg, ${c.secondary[500]} 0%, ${c.primary[500]} 100%)`,`linear-gradient(135deg, ${c.neutral[500]} 0%, ${c.neutral[600]} 100%)`];return r[t%r.length]},m={width:`${r}px`,height:`${r}px`},h=Math.max(12,.4*r);return j.jsxs("div",{className:`relative inline-flex items-center justify-center transition-all duration-300 ease-smooth hover:scale-105 ${n}`,style:m,children:[j.jsxs("div",{className:"relative w-full h-full rounded-full overflow-hidden transition-all duration-300 ease-smooth hover:shadow-lg",style:{boxShadow:o.soft,border:"3px solid rgba(255, 255, 255, 0.8)"},children:[l?j.jsx("div",{className:"flex items-center justify-center w-full h-full text-white font-bold backdrop-blur-sm",style:{background:u(d),fontSize:`${h}px`,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:d}):j.jsx("img",{src:i,alt:t||"User avatar",className:"w-full h-full object-cover transition-all duration-300 ease-smooth hover:scale-110",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t&&d){const e=document.createElement("div");e.className="flex items-center justify-center w-full h-full text-white font-bold backdrop-blur-sm",e.style.background=u(d),e.style.fontSize=`${h}px`,e.style.textShadow="0 1px 2px rgba(0, 0, 0, 0.3)",e.textContent=d,t.appendChild(e)}}}),j.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{background:"linear-gradient(135deg, transparent 0%, rgba(0, 0, 0, 0.1) 50%, transparent 100%)"}})]}),s&&j.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 rounded-full border-2 border-white animate-pulse",style:{width:`${Math.max(8,.2*r)}px`,height:`${Math.max(8,.2*r)}px`,background:`linear-gradient(135deg, ${c.success.primary} 0%, #22C55E 100%)`,boxShadow:o.soft}}),void 0!==a&&j.jsx("div",{className:"absolute -top-1 -right-1 flex items-center justify-center text-xs font-bold rounded-full transition-all duration-300 ease-smooth hover:scale-110 cursor-default",style:{minWidth:`${Math.max(20,.4*r)}px`,height:`${Math.max(20,.4*r)}px`,fontSize:`${Math.max(10,.25*r)}px`,...(p=a,p>=8?{background:`linear-gradient(135deg, ${c.primary[500]} 0%, ${c.primary[600]} 100%)`,border:`2px solid ${c.primary[400]}`,color:"white"}:p>=5||p>=3?{background:`linear-gradient(135deg, ${c.secondary[500]} 0%, ${c.secondary[600]} 100%)`,border:`2px solid ${c.secondary[400]}`,color:"white"}:{background:`linear-gradient(135deg, ${c.neutral[400]} 0%, ${c.neutral[500]} 100%)`,border:`2px solid ${c.neutral[300]}`,color:"white"}),boxShadow:o.medium},title:`攀岩等级: ${a}`,children:j.jsxs("span",{className:"flex items-center gap-0.5",children:[a>=5&&j.jsx("span",{className:"text-yellow-300",style:{fontSize:`${Math.max(8,.2*r)}px`},children:"⭐"}),a]})}),j.jsx("div",{className:"absolute inset-0 rounded-full opacity-0 hover:opacity-100 transition-all duration-300 pointer-events-none",style:{background:`linear-gradient(135deg, ${c.primary[500]}20 0%, ${c.secondary[500]}20 100%)`,transform:"scale(1.1)"}})]});var p},it=({src:e,alt:t,className:r="",style:n={},placeholder:s,fallback:i="/images/placeholder-climb.jpg",onLoad:l,onError:o,threshold:d=.1,rootMargin:u="50px",aspectRatio:m,enableBlur:h=!0,priority:p=!1})=>{const[f,g]=a.useState(!1),[x,v]=a.useState(p),[y,b]=a.useState(!1),[w,N]=a.useState(null),_=a.useRef(null),A=a.useRef(null),S=a.useCallback((e=>e),[]),k=a.useCallback((()=>{g(!0),null==l||l()}),[l]),E=a.useCallback((()=>{b(!0),N(i),null==o||o()}),[i,o]);a.useEffect((()=>{if(!p&&_.current)return A.current=new IntersectionObserver((([e])=>{var t;e.isIntersecting&&(v(!0),null==(t=A.current)||t.disconnect())}),{threshold:d,rootMargin:u}),A.current.observe(_.current),()=>{var e;null==(e=A.current)||e.disconnect()}}),[d,u,p]),a.useEffect((()=>{!x||w||y||N(S(e))}),[x,w,y,e,S]);const $={backgroundColor:c.neutral[200],background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",aspectRatio:m?`${m}`:"auto",minHeight:"120px",...n},C={transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",opacity:f?1:0,filter:h&&!f?"blur(8px)":"none",transform:f?"scale(1)":"scale(1.05)",...n},T=()=>j.jsx("div",{className:`lazy-image-placeholder ${r}`,style:$,role:"img","aria-label":`Loading ${t}`,children:s?j.jsx("img",{src:s,alt:"",className:"w-full h-full object-cover opacity-50","aria-hidden":"true"}):j.jsxs("div",{className:"flex flex-col items-center gap-3",children:[j.jsxs("div",{className:"relative",children:[j.jsx("div",{className:"w-12 h-12 rounded-full animate-pulse",children:j.jsx("div",{className:"w-full h-full rounded-full",style:{background:`linear-gradient(135deg, ${c.primary[300]} 0%, ${c.secondary[300]} 100%)`}})}),j.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xl animate-bounce",style:{animationDelay:"0.2s"},children:"🧗‍♀️"})]}),j.jsx("div",{className:"text-sm font-medium",style:{color:c.neutral[500]},children:"加载图片中..."})]})});return x?y&&!w?j.jsx("div",{className:`lazy-image-error ${r}`,style:{...$,background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,border:`2px dashed ${c.neutral[300]}`},role:"img","aria-label":`Failed to load ${t}`,children:j.jsxs("div",{className:"flex flex-col items-center gap-3",children:[j.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{background:`linear-gradient(135deg, ${c.error.soft} 0%, ${c.error.subtle} 100%)`},children:"📷"}),j.jsx("div",{className:"text-sm font-medium text-center",style:{color:c.neutral[600]},children:"图片加载失败"})]})}):j.jsxs("div",{className:`lazy-image-container ${r}`,style:{position:"relative"},children:[!f&&T(),w&&j.jsx("img",{ref:_,src:w,alt:t,className:"lazy-image "+(f?"loaded":"loading"),style:{...C,position:f?"static":"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",borderRadius:"inherit"},onLoad:k,onError:E,loading:p?"eager":"lazy",decoding:"async"})]}):T()},lt={[Oe.BOULDERING]:{text:"抱石",emoji:"🧗",color:d.BOULDERING.color,bgColor:d.BOULDERING.bgColor,borderColor:d.BOULDERING.borderColor},[Oe.TOP_ROPE_AUTO_BELAY]:{text:"顶绳(自动)",emoji:"🔗",color:d.TOP_ROPE_AUTO_BELAY.color,bgColor:d.TOP_ROPE_AUTO_BELAY.bgColor,borderColor:d.TOP_ROPE_AUTO_BELAY.borderColor},[Oe.TOP_ROPE_MANUAL_BELAY]:{text:"顶绳(手动)",emoji:"👥",color:d.TOP_ROPE_MANUAL_BELAY.color,bgColor:d.TOP_ROPE_MANUAL_BELAY.bgColor,borderColor:d.TOP_ROPE_MANUAL_BELAY.borderColor},[Oe.LEAD_CLIMBING]:{text:"先锋",emoji:"🧭",color:d.LEAD_CLIMBING.color,bgColor:d.LEAD_CLIMBING.bgColor,borderColor:d.LEAD_CLIMBING.borderColor},[Oe.OUTDOOR]:{text:"野外",emoji:"🏔️",color:d.OUTDOOR.color,bgColor:d.OUTDOOR.bgColor,borderColor:d.OUTDOOR.borderColor},[Oe.TRAINING]:{text:"训练",emoji:"💪",color:d.TRAINING.color,bgColor:d.TRAINING.bgColor,borderColor:d.TRAINING.borderColor}},ot={[$e.MEET_AT_ENTRANCE]:"门口集合",[$e.FIRST_COME_FIRST_CLIMB]:"先到先攀"},ct={[Te.FREE]:{text:"免费",color:c.success.primary,bgColor:c.success.subtle},[Te.HOST_TREAT]:{text:"发起人请客",color:c.warning.primary,bgColor:c.warning.subtle},[Te.AA]:{text:"AA制",color:c.secondary[600],bgColor:c.secondary[50]}},dt=a.memo((({variant:e="default",children:t,className:r="",style:a})=>j.jsx("span",{className:`\n        inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold rounded-xl\n        border transition-all duration-300 ease-smooth\n        hover:scale-105 hover:shadow-lg\n        ${{default:"bg-white/80 text-neutral-700 border-neutral-200/50 backdrop-blur-sm",primary:"bg-gradient-to-r from-primary-500 to-primary-600 text-white border-primary-500 shadow-md",secondary:"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white border-secondary-500 shadow-md",warning:"bg-gradient-to-r from-warning-400 to-warning-500 text-warning-900 border-warning-400 shadow-md",success:"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-500 shadow-md","activity-type":"backdrop-blur-sm shadow-sm",gradient:"bg-gradient-to-r from-white/90 to-white/70 text-neutral-700 border-white/50 backdrop-blur-sm shadow-sm"}[e]} ${r}\n      `,style:a,children:t})));dt.displayName="Tag";const ut=a.memo((({activity:e,onClick:t,className:r="",showDistance:n=!1})=>{var s,i,l,d,u,m,h,p;const f=a.useMemo((()=>({isActivityFull:(e.participantCount||0)>=e.slotMax,isActivityStarted:Qe(e.datetime).isBefore(Qe()),formattedDateTime:Qe(e.datetime).format("MM月DD日 HH:mm"),participantText:`${e.participantCount||0}/${e.slotMax}人`,distanceText:void 0!==e.distance&&null!==e.distance?`${e.distance.toFixed(1)}km`:null})),[e.participantCount,e.slotMax,e.datetime,e.distance]),g=a.useMemo((()=>e.types.map((e=>{const t=lt[e];return j.jsxs(dt,{variant:"activity-type",style:{background:`linear-gradient(135deg, ${t.bgColor} 0%, ${t.color}20 100%)`,color:t.color,borderColor:t.borderColor},children:[j.jsx("span",{className:"text-sm drop-shadow-sm",children:t.emoji}),j.jsx("span",{className:"font-semibold",children:t.text})]},e)}))),[e.types]),x=a.useMemo((()=>e.grades&&0!==e.grades.length?nt(e.grades).map((e=>j.jsx(dt,{variant:"primary",children:e},e))):null),[e.grades]),v=a.useMemo((()=>{var t;const r=null==(t=e.host)?void 0:t.avatar;return r?j.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 rounded-2xl overflow-hidden opacity-20 pointer-events-none",children:j.jsx(it,{src:r,alt:`${e.title} - 活动图片`,className:"w-full h-full object-cover",aspectRatio:1,enableBlur:!0,priority:!1})}):null}),[null==(s=e.host)?void 0:s.avatar,e.title]),y=a.useMemo((()=>{var t,r;const a=e.types.map((e=>lt[e].text)).join("、"),n=(null==(t=e.grades)?void 0:t.length)?nt(e.grades).join("、"):"",s=f.formattedDateTime,i=(null==(r=e.host)?void 0:r.nickname)||"未知用户";return`${e.title}，活动类型：${a}${n?`，难度：${n}`:""}，时间：${s}，地点：${e.locationText}，主办人：${i}，参与人数：${f.participantText}`}),[e.title,e.types,e.grades,e.locationText,null==(i=e.host)?void 0:i.nickname,f.formattedDateTime,f.participantText]),b=e=>{e.stopPropagation()},w=ct[e.costMode],N={background:`linear-gradient(135deg, ${c.primary[500]}15 0%, ${c.neutral[100]} 40%, ${c.neutral[50]} 100%)`,borderImage:`linear-gradient(135deg, ${c.primary[400]} 0%, ${c.neutral[300]} 100%) 1`};return j.jsxs("div",{className:`\n        group activity-card relative cursor-pointer overflow-hidden\n        transform transition-all duration-300 ease-smooth\n        hover:scale-[1.02] hover:shadow-xl\n        focus:scale-[1.02] focus:shadow-xl focus:outline-none focus:ring-2 focus:ring-primary-400\n        ${r}\n      `,style:{...N,border:`1px solid ${c.neutral[200]}40`,borderRadius:"20px",padding:"24px",marginBottom:"16px",boxShadow:o.card},onClick:()=>null==t?void 0:t(e),role:"button",tabIndex:0,"aria-label":y,onKeyDown:r=>{"Enter"!==r.key&&" "!==r.key||(r.preventDefault(),null==t||t(e))},children:[(f.isActivityFull||f.isActivityStarted)&&j.jsx("div",{className:"absolute top-4 right-4 px-3 py-1.5 rounded-xl text-xs font-bold backdrop-blur-sm z-20",style:{background:f.isActivityStarted?`linear-gradient(135deg, ${c.neutral[500]} 0%, ${c.neutral[500]} 100%)`:`linear-gradient(135deg, ${c.warning[500]} 0%, ${c.warning[500]} 100%)`,color:"white",boxShadow:o.soft},"aria-label":f.isActivityStarted?"活动已开始":"活动已满员",children:f.isActivityStarted?"已开始":"已满员"}),v,j.jsxs("div",{className:"mb-5 relative z-10",children:[j.jsx("h3",{className:"text-xl font-bold text-neutral-800 mb-3 pr-24 leading-tight drop-shadow-sm",children:e.title}),j.jsxs("div",{className:"flex flex-wrap gap-2.5 mb-4",role:"list","aria-label":"活动类型和难度",children:[g,x]})]}),j.jsxs("div",{className:"space-y-3 mb-5 relative z-10",children:[j.jsxs("div",{className:"flex items-center gap-3 text-neutral-700",children:[j.jsx("span",{className:"text-lg p-2 rounded-xl bg-white/70 backdrop-blur-sm shadow-sm",style:{color:c.primary[500]},"aria-hidden":"true",children:"📅"}),j.jsx("span",{className:"text-sm font-semibold",children:f.formattedDateTime})]}),j.jsxs("div",{className:"flex items-center gap-3 text-neutral-700",children:[j.jsx("span",{className:"text-lg p-2 rounded-xl bg-white/70 backdrop-blur-sm shadow-sm",style:{color:c.secondary[500]},"aria-hidden":"true",children:"📍"}),j.jsx("span",{className:"text-sm font-medium",children:e.locationText}),n&&f.distanceText&&j.jsx("span",{className:"text-xs text-neutral-600 bg-white/60 px-3 py-1 rounded-full backdrop-blur-sm shadow-sm","aria-label":`距离 ${f.distanceText}`,children:f.distanceText})]})]}),j.jsxs("div",{className:"flex items-center gap-3 mb-5 relative z-10 cursor-pointer hover:opacity-80 transition-opacity duration-200",onClick:b,role:"button",tabIndex:0,"aria-label":`主办人：${(null==(l=e.host)?void 0:l.nickname)||"未知用户"}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b(e))},children:[j.jsx(st,{avatar:null==(d=e.host)?void 0:d.avatar,nickname:(null==(u=e.host)?void 0:u.nickname)||"未知用户",level:null==(m=e.host)?void 0:m.level,size:40,className:"shadow-lg"}),j.jsxs("div",{className:"flex-1 min-w-0",children:[j.jsxs("p",{className:"text-sm font-semibold text-neutral-800 truncate",children:["主办：",(null==(h=e.host)?void 0:h.nickname)||"未知用户"]}),j.jsxs("p",{className:"text-xs text-neutral-600",children:["等级：",(null==(p=e.host)?void 0:p.level)||"未知"]})]}),j.jsxs("div",{className:"text-sm font-bold px-3 py-1.5 rounded-xl backdrop-blur-sm",style:{background:`linear-gradient(135deg, ${c.primary[100]} 0%, ${c.primary[50]} 100%)`,color:c.primary[600],border:`1px solid ${c.primary[200]}`},"aria-label":`参与人数：${f.participantText}`,children:["👥 ",f.participantText]})]}),j.jsxs("div",{className:"flex items-center justify-between pt-4 border-t relative z-10",style:{borderColor:`${c.neutral[200]}80`},children:[j.jsxs("div",{className:"flex items-center gap-4",children:[j.jsxs(dt,{variant:"activity-type",style:{background:`linear-gradient(135deg, ${w.bgColor} 0%, ${w.color}15 100%)`,color:w.color,borderColor:w.color+"40"},children:[j.jsx("span",{className:"text-xs","aria-hidden":"true",children:"💰"}),j.jsx("span",{className:"font-semibold",children:w.text})]}),j.jsx("span",{className:"text-xs text-neutral-600 font-medium bg-white/50 px-3 py-1 rounded-lg backdrop-blur-sm","aria-label":`见面方式：${ot[e.meetMode]}`,children:ot[e.meetMode]})]}),j.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:translate-x-1","aria-hidden":"true",children:j.jsx("div",{className:"p-2 rounded-xl shadow-lg",style:{background:`linear-gradient(135deg, ${c.primary[500]} 0%, ${c.primary[600]} 100%)`},children:j.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})})]}),j.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-5 pointer-events-none",style:{background:`radial-gradient(circle, ${c.primary[500]} 0%, transparent 70%)`},"aria-hidden":"true"}),j.jsx("div",{className:"absolute bottom-0 left-0 w-1 h-16 opacity-10 pointer-events-none",style:{background:`linear-gradient(to top, ${c.secondary[500]} 0%, transparent 100%)`},"aria-hidden":"true"})]})}));function mt({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ht=a.forwardRef(mt);function pt({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const ft=a.forwardRef(pt);function gt({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const xt=a.forwardRef(gt),vt=a.createContext(void 0),yt=({children:e})=>{const[t,r]=a.useState([]),n=a.useCallback((e=>{const t=Date.now();r((r=>[...r,{...e,id:t}])),setTimeout((()=>{r((e=>e.filter((e=>e.id!==t))))}),3e3)}),[]),s=e=>{switch(e){case"success":return j.jsx(ht,{className:"w-6 h-6 text-green-500 mr-2"});case"fail":return j.jsx(xt,{className:"w-6 h-6 text-red-500 mr-2"});case"info":return j.jsx(ft,{className:"w-6 h-6 text-blue-500 mr-2"});default:return null}},i=e=>{switch(e){case"top":return"top-5 left-1/2 -translate-x-1/2";case"bottom":return"bottom-5 left-1/2 -translate-x-1/2";default:return"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"}};return j.jsxs(vt.Provider,{value:{show:n},children:[e,j.jsx("div",{className:"fixed z-[1000]",children:t.map((e=>j.jsxs("div",{className:`p-4 rounded-md shadow-lg bg-gray-800 text-white flex items-center max-w-sm ${i(e.position)}`,children:[s(e.icon),j.jsx("span",{children:e.content})]},e.id)))})]})};class bt extends a.Component{constructor(e){super(e),t(this,"handleReset",(()=>{this.setState({hasError:!1,error:void 0})})),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var r,a;null==(a=(r=this.props).onError)||a.call(r,e,t),u("出现了一个错误，请刷新页面重试")}render(){return this.state.hasError?this.props.fallback?this.props.fallback:j.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:j.jsx("div",{className:"max-w-md w-full text-center",children:j.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[j.jsx("div",{className:"mb-4",children:j.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:j.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),j.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"出现了一个错误"}),j.jsx("p",{className:"text-gray-600 mb-6",children:"抱歉，应用程序遇到了一个意外错误。请尝试刷新页面。"}),j.jsxs("div",{className:"space-y-3",children:[j.jsx("button",{onClick:this.handleReset,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"重试"}),j.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"刷新页面"})]}),!1]})})}):this.props.children}}var wt,jt={exports:{}};const Nt=f(wt?jt.exports:(wt=1,jt.exports=function(e,t,r){e=e||{};var a=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,n){return a.fromToBase(e,t,r,n)}r.en.relativeTime=n,a.fromToBase=function(t,a,s,i,l){for(var o,c,d,u=s.$locale().relativeTime||n,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=m.length,p=0;p<h;p+=1){var f=m[p];f.d&&(o=i?r(t).diff(s,f.d,!0):s.diff(t,f.d,!0));var g=(e.rounding||Math.round)(Math.abs(o));if(d=o>0,g<=f.r||!f.r){g<=1&&p>0&&(f=m[p-1]);var x=u[f.l];l&&(g=l(""+g)),c="string"==typeof x?x.replace("%d",g):x(g,a,f.l,d);break}}if(a)return c;var v=d?u.future:u.past;return"function"==typeof v?v(c):v.replace("%s",c)},a.to=function(e,t){return s(e,t,this,!0)},a.from=function(e,t){return s(e,t,this)};var i=function(e){return e.$u?r.utc():r()};a.toNow=function(e){return this.to(i(this),e)},a.fromNow=function(e){return this.from(i(this),e)}}));var _t,At={exports:{}};_t||(_t=1,At.exports=function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e),a={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1100?"上午":r<1300?"中午":r<1800?"下午":"晚上"}};return r.default.locale(a,null,!0),a}(qe())),Qe.extend(Nt),Qe.locale("zh-cn");const St=e=>{switch(e){case"activity_join":return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM3 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766z"})});case"new_comment":return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.627 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})});case"system_announcement":return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-10.105c.118.38.245.754.38 1.125m-.755-6.715C20.365 9.999 21 11.45 21 13.125s-.635 3.126-1.605 4.375m-.755-6.715L18.25 7.5"})});default:return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})})}},kt=e=>{switch(e){case"activity_join":return"活动报名";case"new_comment":return"新留言";case"system_announcement":return"系统公告";case"activity_update":return"活动更新";case"new_review":return"新评论";default:return"通知"}},Et=e=>{switch(e){case"activity_join":return"#10B981";case"new_comment":return"#3B82F6";case"system_announcement":return"#F59E0B";case"activity_update":return"#8B5CF6";case"new_review":return"#EF4444";default:return"#6B7280"}},$t=({notification:e,onClick:t})=>{const r=()=>{t&&t(e)},a=(new Date).getTime()-new Date(e.timestamp).getTime()<864e5;return j.jsxs("div",{role:"button",tabIndex:0,onClick:r,onKeyDown:e=>"Enter"===e.key&&r(),className:"notification-item "+(e.isRead?"read":"unread"),children:[j.jsxs("div",{className:"notification-item-content",children:[j.jsx("div",{className:"notification-icon-wrapper",style:{background:`linear-gradient(135deg, ${Et(e.type)}20 0%, ${Et(e.type)}10 100%)`,color:Et(e.type)},children:St(e.type)}),j.jsxs("div",{className:"notification-content",children:[j.jsxs("div",{className:"notification-header",children:[j.jsx("span",{className:"notification-type-label",children:kt(e.type)}),a&&j.jsx("span",{className:"new-notification-badge",children:"NEW"}),!e.isRead&&j.jsx("div",{className:"unread-indicator"})]}),j.jsx("div",{className:"notification-title",children:e.title}),j.jsx("div",{className:"notification-message",children:e.message}),j.jsx("div",{className:"notification-timestamp",children:Qe(e.timestamp).fromNow()})]})]}),j.jsx("div",{className:"notification-chevron",children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})},Ct=({notifications:e,onNotificationClick:t,isLoading:r})=>r?j.jsxs("div",{className:"p-4",children:[j.jsx("div",{className:"text-sm text-gray-500 mb-2 px-4 py-2",children:"通知列表"}),[1,2,3].map((e=>j.jsx("div",{className:"p-4 border-b border-gray-200 text-gray-400",children:"加载中..."},e)))]}):0===e.length?j.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-16 text-gray-500",children:[j.jsx("div",{className:"text-4xl mb-4",children:"📭"}),j.jsx("p",{children:"暂无通知"})]}):j.jsx("div",{className:"divide-y divide-gray-200",children:e.map((e=>j.jsx($t,{notification:e,onClick:t},e.id)))}),Tt=()=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),Ot=()=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 110-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 01-1.44-4.282m3.102.069a18.03 18.03 0 01-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 018.835 2.535M10.34 6.66a23.847 23.847 0 008.835-2.535m0 0A23.74 23.74 0 0018.795 3m.38 1.125a23.91 23.91 0 011.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-10.105c.118.38.245.754.38 1.125m-.755-6.715C20.365 9.999 21 11.45 21 13.125s-.635 3.126-1.605 4.375m-.755-6.715L18.25 7.5"})}),Dt=()=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}),Mt=[{id:"1",type:"activity_join",title:"🎉 报名成功: 周末欢乐抱石局",message:"您已成功报名 周末欢乐抱石局 活动。",timestamp:new Date(Date.now()-18e5),isRead:!1,linkTo:"/activity/1"},{id:"2",type:"new_comment",title:"💬 新留言: 关于先锋练习",message:"Alice 在 '先锋练习' 活动中发表了新留言。",timestamp:new Date(Date.now()-72e5),isRead:!0,linkTo:"/activity/some-other-id/comments"},{id:"3",type:"system_announcement",title:"🔧 系统维护通知",message:"本周日凌晨2-4点将进行系统维护。",timestamp:new Date(Date.now()-2592e5),isRead:!0},{id:"4",type:"new_review",title:"⭐ 新评价",message:"您参加的活动收到了新的评价。",timestamp:new Date(Date.now()-432e6),isRead:!0},{id:"5",type:"activity_update",title:"📅 活动更新",message:"您报名的活动时间有所调整。",timestamp:new Date(Date.now()-6048e5),isRead:!0}],Lt=({announcements:e=[],notificationCount:t=0,onAnnouncementClick:r,className:s=""})=>{const i=n(),[l,o]=a.useState(!1),[c,d]=a.useState(!1),[u,h]=a.useState(0),[p,f]=a.useState(Mt),[g]=a.useState(!1),x=e.length>0||p.length>0,v=p.filter((e=>!e.isRead)).length;a.useEffect((()=>{if(e.length<=1)return;const t=setInterval((()=>{h((t=>t>=e.length-1?0:t+1))}),5e3);return()=>clearInterval(t)}),[e.length]);const y=a.useCallback((()=>{d(!0)}),[]),b=a.useCallback((e=>{null==r||r(e)}),[r]),w=a.useCallback((e=>{f((t=>t.map((t=>t.id===e.id?{...t,isRead:!0}:t)))),d(!1),e.linkTo?i(e.linkTo):m("此通知没有可跳转的链接")}),[i]),N=a.useCallback((()=>{o((e=>!e))}),[]),_=a.useCallback((()=>{o(!1),d(!1)}),[]);if(a.useEffect((()=>{const e=e=>{"Escape"===e.key&&_()};if(l||c)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[l,c,_]),!x)return null;const A=e[u]||e[0],S=e.length>1;return j.jsxs(j.Fragment,{children:[j.jsx("div",{className:`notification-center ${s}`,children:j.jsxs("div",{className:"notification-bar",children:[j.jsxs("button",{onClick:y,className:"notification-bell-section",children:[j.jsxs("div",{className:"bell-icon-wrapper",children:[j.jsx(Tt,{}),t>0&&j.jsx("div",{className:"notification-badge",children:j.jsx("span",{className:"notification-count",children:t>99?"99+":t})})]}),j.jsxs("div",{className:"bell-content",children:[j.jsx("span",{className:"bell-label",children:"通知"}),v>0&&j.jsxs("span",{className:"bell-description",children:[v," 条新消息"]})]})]}),e.length>0&&v>0&&j.jsx("div",{className:"notification-divider"}),e.length>0&&j.jsxs("div",{className:"announcement-section",children:[j.jsxs("div",{className:"announcement-content",onClick:()=>b(A),children:[j.jsx("div",{className:"announcement-icon-wrapper",children:j.jsx(Ot,{})}),j.jsxs("div",{className:"announcement-text",children:[j.jsxs("div",{className:"announcement-header",children:[j.jsx("span",{className:"announcement-label",children:"公告"}),A.weight&&A.weight>=2&&j.jsx("span",{className:"priority-badge",children:"重要"}),(new Date).getTime()-new Date(A.createdAt).getTime()<6048e5&&j.jsx("span",{className:"new-badge",children:"NEW"}),S&&j.jsx("div",{className:"announcement-indicators",children:e.map(((e,t)=>j.jsx("div",{className:"indicator-dot "+(t===u?"active":"")},t)))})]}),j.jsx("span",{className:"announcement-title",children:A.title})]})]}),S&&j.jsx("button",{onClick:N,className:"expand-button","aria-label":l?"收起公告列表":"展开公告列表",children:j.jsx("div",{className:"expand-icon "+(l?"expanded":""),children:j.jsx(Dt,{})})})]})]})}),l&&S&&j.jsxs("div",{className:"notification-overlay",onClick:_,children:[j.jsx("div",{className:"notification-overlay-backdrop"}),j.jsxs("div",{className:"floating-announcements",onClick:e=>e.stopPropagation(),children:[j.jsxs("div",{className:"floating-header",children:[j.jsx("h3",{className:"floating-title",children:"所有公告"}),j.jsx("button",{onClick:_,className:"floating-close-button","aria-label":"关闭公告列表",children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),j.jsx("div",{className:"floating-content",children:e.map(((e,t)=>j.jsxs("button",{onClick:()=>{b(e),_()},className:"floating-announcement-item "+(t===u?"active":""),children:[j.jsx("div",{className:"floating-announcement-icon",children:j.jsx(Ot,{})}),j.jsxs("div",{className:"floating-announcement-content",children:[j.jsxs("div",{className:"floating-announcement-header",children:[e.weight&&e.weight>=2&&j.jsx("span",{className:"priority-badge small",children:"重要"}),(new Date).getTime()-new Date(e.createdAt).getTime()<6048e5&&j.jsx("span",{className:"new-badge small",children:"NEW"})]}),j.jsx("span",{className:"floating-announcement-title",children:e.title}),j.jsx("span",{className:"floating-announcement-date",children:new Date(e.createdAt).toLocaleDateString("zh-CN")})]})]},t)))})]})]}),c&&j.jsx("div",{className:"notification-dropdown-overlay",onClick:_,children:j.jsxs("div",{className:"notification-dropdown",onClick:e=>e.stopPropagation(),children:[j.jsxs("div",{className:"dropdown-header",children:[j.jsxs("div",{className:"dropdown-title-section",children:[j.jsxs("div",{className:"dropdown-icon-wrapper",children:[j.jsx(Tt,{}),v>0&&j.jsx("div",{className:"dropdown-notification-badge",children:j.jsx("span",{className:"dropdown-notification-count",children:v>99?"99+":v})})]}),j.jsxs("div",{className:"dropdown-header-text",children:[j.jsx("h3",{className:"dropdown-title",children:"我的通知"}),j.jsx("span",{className:"dropdown-subtitle",children:v>0?`${v} 条未读消息`:"所有消息已读"})]})]}),j.jsx("button",{onClick:_,className:"dropdown-close-button","aria-label":"关闭通知列表",children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),j.jsx("div",{className:"dropdown-content",children:j.jsx(Ct,{notifications:p,onNotificationClick:w,isLoading:g})})]})})]})},It=()=>{const e=n(),t=s(),{announcements:a}=Ge((e=>({announcements:e.announcements,theme:e.theme,error:e.error,isLoadingAnnouncements:e.isLoadingAnnouncements}))),l=(()=>{const e=t.pathname;return"/"===e||e.startsWith("/activity")?"activities":e.startsWith("/profile")||e.startsWith("/my-activities")?"my":e.startsWith("/create-activity")?"create":"activities"})(),o=t=>{"activities"===t?e("/"):"my"===t?e("/profile"):"create"===t&&e("/create-activity")},c=r.useCallback((e=>{m(`查看公告: ${e.title}`)}),[]),[d]=r.useState(3),[u]=r.useState(!0);return j.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[j.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100 p-4",children:j.jsx(Lt,{announcements:a,notificationCount:d,hasNewNotifications:u,onAnnouncementClick:c,className:"w-full"})}),j.jsx("main",{className:"flex-1 overflow-y-auto pb-20",children:j.jsx(i,{})}),j.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:j.jsxs("div",{className:"flex items-center justify-around h-16 px-4",children:[j.jsxs("button",{className:"relative flex flex-col items-center justify-center py-2 px-3 rounded-xl transition-all duration-200 "+("activities"===l?"text-orange-500 bg-orange-50":"text-gray-500 hover:text-gray-700"),onClick:()=>o("activities"),children:[j.jsx("i",{className:"fas fa-mountain text-xl "+("activities"===l?"text-orange-500":"text-gray-500")}),j.jsx("span",{className:"text-xs mt-1 font-medium",children:"Activities"}),"activities"===l&&j.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-orange-500 rounded-full"})]}),j.jsxs("button",{className:"relative flex flex-col items-center justify-center p-3 rounded-2xl transition-all duration-300 "+("create"===l?"bg-gradient-to-r from-orange-500 to-pink-500 text-white transform scale-110":"bg-gradient-to-r from-orange-400 to-pink-400 text-white hover:scale-105"),onClick:()=>o("create"),children:[j.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:j.jsx("i",{className:"fas fa-plus text-xl"})}),j.jsx("span",{className:"text-xs mt-1 font-medium",children:"Create"}),"create"===l&&j.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full"})]}),j.jsxs("button",{className:"relative flex flex-col items-center justify-center py-2 px-3 rounded-xl transition-all duration-200 "+("my"===l?"text-orange-500 bg-orange-50":"text-gray-500 hover:text-gray-700"),onClick:()=>o("my"),children:[j.jsx("i",{className:"fas fa-user text-xl "+("my"===l?"text-orange-500":"text-gray-500")}),j.jsx("span",{className:"text-xs mt-1 font-medium",children:"My"}),"my"===l&&j.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-orange-500 rounded-full"})]})]})})]})},Rt=({onRefresh:e,children:t,isRefreshing:r=!1,threshold:n=80,maxPullDistance:s=120})=>{const[i,l]=a.useState(0),[o,c]=a.useState(!1),[d,u]=a.useState(0),m=a.useRef(null),h=a.useCallback((e=>{m.current&&0===m.current.scrollTop&&(u(e.touches[0].clientY),c(!0))}),[]),p=a.useCallback((e=>{if(!o||!m.current)return;const t=e.touches[0].clientY-d;if(t>0&&0===m.current.scrollTop){e.preventDefault();const r=Math.min(.5*t,s);l(r)}}),[o,d,s]),f=a.useCallback((async()=>{o&&(c(!1),i>=n&&!r&&await e(),l(0))}),[o,i,n,e,r]);a.useEffect((()=>{const e=m.current;if(e)return e.addEventListener("touchstart",h,{passive:!1}),e.addEventListener("touchmove",p,{passive:!1}),e.addEventListener("touchend",f),()=>{e.removeEventListener("touchstart",h),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",f)}}),[h,p,f]),a.useEffect((()=>{r&&l(0)}),[r]);return j.jsxs("div",{ref:m,className:"pull-to-refresh-container",style:{transform:`translateY(${i}px)`,transition:o?"none":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[j.jsx("div",{className:"pull-to-refresh-indicator",style:{height:`${Math.max(i,r?80:0)}px`,opacity:Math.min(i/n,1)},children:j.jsxs("div",{className:"refresh-content",children:[j.jsx("div",{className:"refresh-icon "+(r?"rotate-360":i>=n?"rotate-180":"rotate-0"),children:r?j.jsxs("div",{className:"climbing-animation",children:[j.jsx("span",{className:"climber",children:"🧗‍♀️"}),j.jsx("div",{className:"rope"})]}):j.jsx("span",{className:"arrow",children:"⬇️"})}),j.jsx("span",{className:"refresh-text",children:r?"🧗‍♀️ 正在刷新...":i>=n?"🚀 释放刷新":"⬇️ 下拉刷新"})]})}),j.jsx("div",{className:"content",children:t})]})},Pt=({children:e,hasMore:t,loadMore:r,loading:n,threshold:s=200,endMessage:i,loader:l})=>{const o=a.useRef(null),c=a.useRef(!1),d=a.useCallback((()=>{if(!o.current||c.current||!t||n)return;const{scrollTop:e,scrollHeight:a,clientHeight:i}=o.current;a-e-i<=s&&(c.current=!0,r())}),[t,n,r,s]);a.useEffect((()=>{n||(c.current=!1)}),[n]),a.useEffect((()=>{const e=o.current;if(!e)return;const t=()=>{d()};return e.addEventListener("scroll",t,{passive:!0}),d(),()=>{e.removeEventListener("scroll",t)}}),[d]);const u=j.jsx("div",{className:"infinite-scroll-loader",children:j.jsxs("div",{className:"loading-content",children:[j.jsxs("div",{className:"climbing-dots",children:[j.jsx("div",{className:"dot dot-1",children:"🧗‍♀️"}),j.jsx("div",{className:"dot dot-2",children:"🧗‍♂️"}),j.jsx("div",{className:"dot dot-3",children:"🧗‍♀️"})]}),j.jsx("span",{className:"loading-text",children:"加载更多活动中..."})]})}),m=j.jsx("div",{className:"infinite-scroll-end",children:j.jsxs("div",{className:"end-content",children:[j.jsx("div",{className:"summit-icon",children:"🏔️"}),j.jsx("span",{className:"end-text",children:"已到达顶峰！没有更多活动了"})]})});return j.jsxs("div",{ref:o,className:"infinite-scroll-container",children:[j.jsx("div",{className:"infinite-scroll-content",children:e}),n&&(l||u),!t&&!n&&(i||m)]})},Ut=({isSearching:e})=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 transition-all duration-300 "+(e?"animate-pulse text-primary-500":"text-neutral-400"),children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Bt=()=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Yt=()=>j.jsxs("div",{className:"flex items-center space-x-1",children:[j.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),j.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),j.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),zt=({activity:e,searchTerm:t,onClick:r})=>{const a=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t})`,"gi");return e.split(r).map(((e,t)=>r.test(e)?j.jsx("span",{className:"font-bold rounded px-1",style:{background:`linear-gradient(135deg, ${c.primary[100]} 0%, ${c.primary[200]} 100%)`,color:c.primary[700]},children:e},t):e))},n=e=>({[Oe.BOULDERING]:"🧗‍♀️",[Oe.TOP_ROPE_AUTO_BELAY]:"🔗",[Oe.TOP_ROPE_MANUAL_BELAY]:"🔗",[Oe.LEAD_CLIMBING]:"🚀",[Oe.OUTDOOR]:"🏔️",[Oe.TRAINING]:"💪"}[e]||"🧗‍♀️");return j.jsxs("div",{onClick:()=>r(e),className:"p-4 cursor-pointer transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] rounded-xl mb-2",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",border:`1px solid ${c.neutral[200]}`,boxShadow:o.soft},onMouseEnter:e=>{e.currentTarget.style.borderColor=c.primary[300],e.currentTarget.style.boxShadow=o.medium},onMouseLeave:e=>{e.currentTarget.style.borderColor=c.neutral[200],e.currentTarget.style.boxShadow=o.soft},children:[j.jsxs("div",{className:"flex items-start justify-between mb-2",children:[j.jsx("h3",{className:"font-semibold text-base leading-tight",children:a(e.title,t)}),j.jsx("div",{className:"flex gap-1 ml-2",children:e.types.map(((e,t)=>j.jsx("span",{className:"text-lg",children:n(e)},t)))})]}),j.jsxs("p",{className:"text-sm mb-2",style:{color:c.neutral[600]},children:["📍 ",a(e.locationText,t)]}),j.jsxs("div",{className:"flex items-center justify-between text-xs",children:[j.jsxs("span",{style:{color:c.neutral[500]},children:["👥 ",e.participantCount,"/",e.slotMax]}),j.jsxs("span",{style:{color:c.neutral[500]},children:["⏰ ",new Date(e.datetime).toLocaleDateString()]})]})]})},Vt=({label:e,onRemove:t,type:r="activity"})=>j.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 animate-fade-in",style:(()=>{switch(r){case"search":return{background:`linear-gradient(135deg, ${c.primary[100]} 0%, ${c.primary[200]} 100%)`,color:c.primary[700],border:`1px solid ${c.primary[300]}`};case"grade":return{background:`linear-gradient(135deg, ${c.secondary[100]} 0%, ${c.secondary[200]} 100%)`,color:c.secondary[700],border:`1px solid ${c.secondary[300]}`};default:return{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,color:c.neutral[700],border:`1px solid ${c.neutral[300]}`}}})(),children:[j.jsx("span",{className:"max-w-32 truncate",children:e}),j.jsx("button",{onClick:t,className:"p-0.5 rounded-full hover:bg-black hover:bg-opacity-10 transition-colors duration-200",children:j.jsx(Bt,{})})]}),Gt=({activities:e,onSearchResults:t,onActivityClick:r,placeholder:n="🔍 实时搜索活动名称或地点...",debounceMs:s=300,maxResults:i=10,filters:l={types:[],grades:[]},onFiltersChange:d})=>{const[u,m]=a.useState(""),[h,p]=a.useState(!1),[f,g]=a.useState(!1),[x,v]=a.useState([]),[y,b]=a.useState([]),w=a.useRef(null),N=a.useRef(null),_=a.useRef(),A=a.useCallback((r=>{if(!r.trim())return v([]),t([]),void p(!1);p(!0),setTimeout((()=>{const a=e.filter((e=>{const t=e.title.toLowerCase().includes(r.toLowerCase())||e.locationText.toLowerCase().includes(r.toLowerCase()),a=0===l.types.length||l.types.some((t=>e.types.includes(t))),n=0===l.grades.length||e.grades&&e.grades.some((e=>l.grades.includes(e)));return t&&a&&n})).slice(0,i).sort(((e,t)=>{const a=e.title.toLowerCase().includes(r.toLowerCase()),n=t.title.toLowerCase().includes(r.toLowerCase());return a&&!n?-1:!a&&n?1:new Date(e.datetime).getTime()-new Date(t.datetime).getTime()}));v(a),t(a),p(!1)}),100)}),[e,l,i,t]),S=e=>{var t;const r=e||u;r.trim()&&(b((e=>{const t=[r,...e.filter((e=>e!==r))].slice(0,5);return localStorage.setItem("recentSearches",JSON.stringify(t)),t})),A(r),g(!1),null==(t=w.current)||t.blur())},k=()=>{var e;m(""),v([]),g(!1),t([]),_.current&&clearTimeout(_.current),null==(e=w.current)||e.focus()},E=e=>{var t;r(e),g(!1),null==(t=w.current)||t.blur()};a.useEffect((()=>{const e=localStorage.getItem("recentSearches");if(e)try{b(JSON.parse(e))}catch(t){}}),[]),a.useEffect((()=>{const e=e=>{var t;!N.current||N.current.contains(e.target)||(null==(t=w.current)?void 0:t.contains(e.target))||g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),a.useEffect((()=>()=>{_.current&&clearTimeout(_.current)}),[]);const $=u||l.types.length>0||l.grades.length>0;return j.jsxs("div",{className:"relative w-full",children:[j.jsxs("div",{className:"relative group",children:[j.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:j.jsx(Ut,{isSearching:h})}),j.jsx("input",{ref:w,type:"text",value:u,onChange:e=>{const t=e.target.value;m(t),g(!0),_.current&&clearTimeout(_.current),_.current=setTimeout((()=>{A(t)}),s)},onFocus:e=>{g(!0),e.target.style.borderColor=c.primary[400],e.target.style.boxShadow=`0 0 0 4px ${c.primary[100]}`},onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),S()),"Escape"===e.key&&(g(!1),null==(t=w.current)||t.blur())},placeholder:n,className:"w-full pl-12 pr-12 py-4 text-lg font-medium rounded-2xl transition-all duration-300 ease-out focus:outline-none focus:ring-4",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",border:`2px solid ${c.neutral[200]}`,boxShadow:o.soft,color:c.neutral[800]},onBlur:e=>{e.target.style.borderColor=c.neutral[200],e.target.style.boxShadow=o.soft}}),j.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:h?j.jsx(Yt,{}):u?j.jsx("button",{onClick:k,className:"text-neutral-400 hover:text-neutral-600 transition-colors duration-200 p-1 rounded-full hover:bg-neutral-100",children:j.jsx(Bt,{})}):null})]}),$&&j.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 animate-fade-in",children:[u&&j.jsx(Vt,{label:`搜索: "${u}"`,onRemove:()=>{k()},type:"search"}),l.types.map((e=>j.jsx(Vt,{label:`类型: ${e}`,onRemove:()=>{return t=e,void(d&&d({...l,types:l.types.filter((e=>e!==t))}));var t},type:"activity"},e))),l.grades.map((e=>j.jsx(Vt,{label:`难度: ${e}`,onRemove:()=>{return t=e,void(d&&d({...l,grades:l.grades.filter((e=>e!==t))}));var t},type:"grade"},e)))]}),f&&(u||y.length>0)&&j.jsx("div",{ref:N,className:"absolute top-full left-0 right-0 mt-2 z-50 rounded-2xl overflow-hidden backdrop-blur-lg animate-fade-in",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%)",border:`1px solid ${c.neutral[200]}`,boxShadow:o.large,maxHeight:"70vh",overflowY:"auto"},children:u?j.jsx(j.Fragment,{children:h?j.jsxs("div",{className:"p-6 text-center",children:[j.jsx(Yt,{}),j.jsx("p",{className:"mt-2 text-sm",style:{color:c.neutral[600]},children:"正在搜索..."})]}):x.length>0?j.jsxs("div",{className:"p-4",children:[j.jsxs("h3",{className:"text-sm font-semibold mb-3 px-2",style:{color:c.neutral[700]},children:["🎯 搜索结果 (",x.length,")"]}),x.map((e=>j.jsx(zt,{activity:e,searchTerm:u,onClick:E},e.id)))]}):j.jsxs("div",{className:"p-6 text-center",children:[j.jsx("div",{className:"text-4xl mb-2",children:"🔍"}),j.jsx("p",{className:"text-lg font-semibold mb-1",style:{color:c.neutral[600]},children:"未找到相关活动"}),j.jsx("p",{className:"text-sm",style:{color:c.neutral[500]},children:"尝试其他关键词或调整筛选条件"})]})}):y.length>0&&j.jsxs("div",{className:"p-4",children:[j.jsx("h3",{className:"text-sm font-semibold mb-3 px-2",style:{color:c.neutral[700]},children:"⏱️ 最近搜索"}),y.map(((e,t)=>j.jsx("button",{onClick:()=>{m(e),S(e)},className:"w-full text-left p-3 rounded-xl mb-2 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%)",border:`1px solid ${c.neutral[200]}`},onMouseEnter:e=>{e.currentTarget.style.borderColor=c.primary[300]},onMouseLeave:e=>{e.currentTarget.style.borderColor=c.neutral[200]},children:j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"text-lg",children:"🕐"}),j.jsx("span",{className:"font-medium",children:e})]})},t)))]})})]})},Ft=r.memo((({activity:e,index:t,onActivityClick:r})=>{const n=a.useCallback((()=>{r(e)}),[e,r]);return j.jsx("div",{className:"activity-item mb-4",style:{animation:`fadeInUp 0.4s ease-out ${Math.min(.1*t,1)}s both`},children:j.jsx(ut,{activity:e,onClick:n,showDistance:!0})})}));Ft.displayName="MemoizedActivityCard";const Ht=r.memo((({selectedTypes:e,selectedGrades:t,onClearFilters:r})=>e.length>0||t.length>0?j.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsxs("div",{className:"text-sm text-blue-700",children:[j.jsx("span",{children:"已应用筛选: "}),e.length>0&&j.jsxs("span",{className:"font-medium",children:[e.length," 种类型"]}),e.length>0&&t.length>0&&j.jsx("span",{children:", "}),t.length>0&&j.jsxs("span",{className:"font-medium",children:[t.length," 种难度"]})]}),j.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium underline",children:"清除筛选"})]})}):null));Ht.displayName="FilterSummary";const Wt=r.memo((()=>{const e=n(),{activities:t,isLoadingActivities:r}=He(),{setActivityLoading:s}=Je(),{selectedTypes:i,selectedGrades:l}=Ge((e=>({searchText:e.searchText,selectedTypes:e.selectedTypes,selectedGrades:e.selectedGrades}))),{setSelectedTypes:o,setSelectedGrades:c,resetFilters:d}=Ge((e=>({setSearchText:e.setSearchText,setSelectedTypes:e.setSelectedTypes,setSelectedGrades:e.setSelectedGrades,resetFilters:e.resetFilters}))),m=a.useMemo((()=>({activitiesCount:t.length,isLoading:r})),[t.length,r]);a.useEffect((()=>{}),[m]);const[p,f]=a.useState(10),[g,x]=a.useState(!1),[v,y]=a.useState(!1),[b,w]=a.useState([]),[N,_]=a.useState(!1),A=a.useCallback((t=>{e(`/activity/${t.id}`)}),[e]),S=a.useCallback((t=>{e(`/activity/${t.id}`)}),[e]),k=a.useCallback((()=>{e("/create-activity")}),[e]),E=a.useMemo((()=>{let e;return t=>{clearTimeout(e),e=setTimeout((()=>{w(t),_(t.length>0)}),150)}}),[]),$=a.useCallback((e=>{E(e)}),[E]),C=a.useMemo((()=>{performance.now();let e=N?b:t;i.length>0&&(e=e.filter((e=>e.types.some((e=>i.includes(e)))))),l.length>0&&(e=e.filter((e=>e.grades.some((e=>l.includes(e))))));const r=[...e].sort(((e,t)=>new Date(e.datetime).getTime()-new Date(t.datetime).getTime()));performance.now();return r}),[t,b,N,i,l]),T=a.useMemo((()=>({currentActivities:C.slice(0,p),hasMore:p<C.length,totalCount:C.length})),[C,p]),O=a.useCallback((async()=>{!v&&T.hasMore&&(y(!0),await new Promise((e=>setTimeout(e,300))),f((e=>Math.min(e+10,C.length))),y(!1))}),[v,T.hasMore,C.length]),D=a.useCallback((async()=>{if(!g){x(!0);try{s(!0),await new Promise((e=>setTimeout(e,800))),f(10),_(!1),w([]),h("活动列表已更新！")}catch(e){u("刷新失败，请重试")}finally{s(!1),x(!1)}}}),[g,s]),M=a.useMemo((()=>({types:i,grades:l})),[i,l]),L=a.useCallback((e=>{o(e.types),c(e.grades),f(10)}),[o,c]),I=a.useCallback((()=>{d(),f(10)}),[d]),R=a.useMemo((()=>i.length>0||l.length>0),[i.length,l.length]),P=a.useMemo((()=>0===T.currentActivities.length?j.jsxs("div",{className:"text-center py-12",children:[j.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🧗‍♀️"}),j.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:R?"没有符合条件的活动":"暂无活动"}),j.jsx("p",{className:"text-gray-600 mb-6",children:R?"尝试调整筛选条件或清除筛选":"成为第一个创建活动的人！"}),!R&&j.jsx("button",{onClick:k,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"创建活动"})]}):j.jsx(Pt,{hasMore:T.hasMore,loadMore:O,loading:v,children:j.jsx("div",{className:"space-y-4",children:T.currentActivities.map(((e,t)=>j.jsx(Ft,{activity:e,index:t,onActivityClick:A},e.id)))})})),[T.currentActivities,T.hasMore,R,v,O,A,k]);return j.jsx(Rt,{onRefresh:D,isRefreshing:g,children:j.jsxs("div",{className:"min-h-screen p-6 pb-20",style:{background:"linear-gradient(180deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.8) 100%)"},children:[j.jsx("div",{className:"mb-6",children:j.jsx(Gt,{activities:t,onSearchResults:$,onActivityClick:S,filters:M,onFiltersChange:L,placeholder:"🔍 实时搜索活动名称或地点...",debounceMs:300,maxResults:15})}),j.jsx(Ht,{selectedTypes:i,selectedGrades:l,onClearFilters:I}),P,r&&!g&&j.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50",children:j.jsx("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:j.jsxs("div",{className:"flex items-center space-x-3",children:[j.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"}),j.jsx("span",{className:"text-gray-700",children:"加载中..."})]})})})]})})})),Jt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Kt=()=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),Zt=({className:e="w-5 h-5"})=>j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`text-primary-600 ${e}`,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),j.jsx("circle",{cx:"12",cy:"12",r:"10"})]}),qt=({className:e="w-5 h-5"})=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`text-secondary-600 ${e}`,children:j.jsx("path",{fillRule:"evenodd",d:"M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.92 16.92 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),Qt=({className:e="w-5 h-5"})=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`text-accent-600 ${e}`,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),Xt=({className:e="w-5 h-5"})=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:`text-neutral-600 ${e}`,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})}),er=[{activityId:"1",userId:"user2",joinTime:new Date,user:{openid:"user2",nickname:"Alice",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alice",level:3,gearTags:[],createdAt:new Date}},{activityId:"1",userId:"user3",joinTime:new Date,user:{openid:"user3",nickname:"Bob",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Bob",level:2,gearTags:[],createdAt:new Date}}],tr=[{id:"1",activityId:"1",userId:"user2",content:"期待！我会准时到的",timestamp:new Date,user:{openid:"user2",nickname:"Alice",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alice",level:3,gearTags:[],createdAt:new Date}}],rr=({type:e="default",children:t,className:r=""})=>j.jsx("span",{className:`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-xl backdrop-blur-sm ${r}`,style:(()=>{switch(e){case"primary":return{background:`linear-gradient(135deg, ${c.primary[100]} 0%, ${c.primary[200]} 100%)`,color:c.primary[700],border:`1px solid ${c.primary[300]}`};case"success":return{background:`linear-gradient(135deg, ${c.success.subtle} 0%, ${c.success.soft} 100%)`,color:c.success.primary,border:`1px solid ${c.success.primary}`};case"warning":return{background:`linear-gradient(135deg, ${c.warning.subtle} 0%, ${c.warning.soft} 100%)`,color:c.warning.primary,border:`1px solid ${c.warning.primary}`};case"error":return{background:`linear-gradient(135deg, ${c.error.subtle} 0%, ${c.error.soft} 100%)`,color:c.error.primary,border:`1px solid ${c.error.primary}`};case"info":return{background:`linear-gradient(135deg, ${c.info.subtle} 0%, ${c.info.soft} 100%)`,color:c.info.primary,border:`1px solid ${c.info.primary}`};default:return{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,color:c.neutral[700],border:`1px solid ${c.neutral[300]}`}}})(),children:t}),ar=({description:e,icon:t="🧗‍♀️",className:r=""})=>j.jsxs("div",{className:`flex flex-col items-center justify-center text-center p-12 rounded-2xl backdrop-blur-sm ${r}`,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",boxShadow:o.card},children:[j.jsx("div",{className:"text-6xl mb-4",children:t}),j.jsx("p",{className:"text-lg font-semibold",style:{color:c.neutral[600]},children:e})]}),nr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,t,r,s,i,d,m;const{id:p}=l(),f=n(),{activities:g}=He(),{setCurrentActivity:x}=Je(),{user:v}=Fe(),[y,b]=a.useState(void 0),[w,N]=a.useState([]),[_,A]=a.useState([]),[S,k]=a.useState(!1),[E,$]=a.useState(!1);a.useEffect((()=>{var e;const t=g.find((e=>e.id===p));t?(b(t),x(t),"1"===t.id?(N(er),A(tr),k(er.some((e=>e.userId===(null==v?void 0:v.openid))))):(N([]),A([]),k((null==(e=t.participantIds)?void 0:e.includes((null==v?void 0:v.openid)||""))||!1))):(b(void 0),x(null))}),[p,g,x,v]);const C=()=>{f(-1)},T=e=>{f(`/profile/${e}`)};if(!y)return j.jsxs("div",{className:"min-h-screen p-6",style:{background:"linear-gradient(180deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.8) 100%)"},children:[j.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10 mb-6 rounded-2xl backdrop-blur-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:o.medium},children:j.jsx("div",{className:"px-6 py-4",children:j.jsxs("div",{className:"relative flex items-center justify-center",children:[j.jsx("button",{onClick:C,className:"absolute left-0 p-2 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95",style:{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,color:c.primary[600]},"aria-label":"Go back",children:j.jsx(Kt,{})}),j.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${c.primary[600]} 0%, ${c.secondary[600]} 100%)`},children:"🧗‍♀️ 活动详情"})]})})}),j.jsx(ar,{description:"活动不存在",icon:"🤔"})]});const O=(null==v?void 0:v.openid)===y.hostId,D=w.length>=y.slotMax,M=Qe(y.datetime).isBefore(Qe()),L=!(O||S||D||M),I=S&&!O&&!M;return j.jsxs("div",{className:"min-h-screen pb-24 p-6",style:{background:"linear-gradient(180deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.8) 100%)"},children:[j.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10 mb-6 rounded-2xl backdrop-blur-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:o.medium},children:j.jsx("div",{className:"px-6 py-4",children:j.jsxs("div",{className:"relative flex items-center justify-center",children:[j.jsx("button",{onClick:C,className:"absolute left-0 p-2 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95",style:{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,color:c.primary[600]},"aria-label":"Go back",children:j.jsx(Kt,{})}),j.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${c.primary[600]} 0%, ${c.secondary[600]} 100%)`},children:"🧗‍♀️ 活动详情"})]})})}),j.jsxs("div",{className:"space-y-6",children:[j.jsxs("div",{className:"p-6 rounded-2xl backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:o.card,border:"1px solid rgba(255, 255, 255, 0.3)"},children:[j.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:c.neutral[800]},children:y.title}),j.jsxs("div",{className:"space-y-3 mb-6",children:[j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"p-2 rounded-xl",style:{background:`linear-gradient(135deg, ${c.primary[100]} 0%, ${c.primary[200]} 100%)`},children:j.jsx(Zt,{className:"w-5 h-5"})}),j.jsx("span",{className:"font-medium",style:{color:c.neutral[700]},children:Qe(y.datetime).format("MM月DD日 HH:mm")})]}),j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"p-2 rounded-xl",style:{background:`linear-gradient(135deg, ${c.secondary[100]} 0%, ${c.secondary[200]} 100%)`},children:j.jsx(qt,{className:"w-5 h-5"})}),j.jsx("span",{className:"font-medium",style:{color:c.neutral[700]},children:y.locationText})]}),j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"p-2 rounded-xl",style:{background:`linear-gradient(135deg, ${c.accent[100]} 0%, ${c.accent[200]} 100%)`},children:j.jsx(Qt,{className:"w-5 h-5"})}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsxs("span",{className:"font-medium",style:{color:c.neutral[700]},children:[w.length,"/",y.slotMax,"人"]}),D&&j.jsx(rr,{type:"warning",children:"已满员"})]})]})]}),j.jsxs("div",{className:"flex flex-wrap gap-3",children:[j.jsx(rr,{type:"primary",children:y.meetMode===$e.MEET_AT_ENTRANCE?"🚪 门口集合":"🏃‍♀️ 先到先攀"}),j.jsx(rr,{type:"success",children:y.costMode===Te.FREE?"🆓 免费":y.costMode===Te.AA?"💰 AA":"🎁 我请客"}),y.isPrivate&&j.jsx(rr,{type:"warning",children:"🔒 私密活动"})]})]}),j.jsxs("div",{className:"p-6 rounded-2xl backdrop-blur-sm cursor-pointer transition-all duration-300 hover:scale-[1.02]",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:o.card,border:"1px solid rgba(255, 255, 255, 0.3)"},onClick:()=>T(y.hostId),children:[j.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:c.neutral[700]},children:"👨‍💼 发起人"}),j.jsxs("div",{className:"flex items-center space-x-4",children:[j.jsx(st,{avatar:null==(e=y.host)?void 0:e.avatar,nickname:(null==(t=y.host)?void 0:t.nickname)||"发起人",level:null==(r=y.host)?void 0:r.level,size:56}),j.jsxs("div",{children:[j.jsx("div",{className:"text-lg font-bold",style:{color:c.neutral[800]},children:(null==(s=y.host)?void 0:s.nickname)||"发起人"}),j.jsxs("div",{className:"text-sm font-medium",style:{color:c.neutral[500]},children:["Lv.",(null==(i=y.host)?void 0:i.level)||1," 攀岩者"]})]})]})]}),j.jsxs("div",{className:"p-6 rounded-2xl backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:o.card,border:"1px solid rgba(255, 255, 255, 0.3)"},children:[j.jsxs("h3",{className:"text-lg font-bold mb-4",style:{color:c.neutral[700]},children:["👥 参与者 (",w.length,")"]}),w.length>0?j.jsx("div",{className:"flex flex-wrap gap-4",children:w.map((e=>{var t,r,a;return j.jsxs("div",{className:"flex flex-col items-center cursor-pointer transform hover:scale-105 transition-all duration-200 p-3 rounded-xl",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%)"},onClick:()=>T(e.userId),children:[j.jsx(st,{avatar:(null==(t=e.user)?void 0:t.avatar)||`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.userId}`,nickname:(null==(r=e.user)?void 0:r.nickname)||e.userId,size:48}),j.jsx("span",{className:"text-xs mt-2 font-medium text-center max-w-16 truncate",style:{color:c.neutral[600]},children:(null==(a=e.user)?void 0:a.nickname)||e.userId})]},e.userId)}))}):j.jsx(ar,{description:"暂无其他参与者",icon:"👥",className:"py-8"})]}),j.jsxs("div",{className:"p-6 rounded-2xl backdrop-blur-sm cursor-pointer transition-all duration-300 hover:scale-[1.02] hover:shadow-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:o.card,border:"1px solid rgba(255, 255, 255, 0.3)"},onClick:()=>{f(`/comment-board/${p}`)},children:[j.jsxs("div",{className:"flex justify-between items-center mb-4",children:[j.jsxs("h3",{className:"text-lg font-bold",style:{color:c.neutral[700]},children:["💬 留言板 (",_.length,")"]}),j.jsx("div",{className:"p-2 rounded-xl",style:{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`},children:j.jsx(Xt,{className:"w-5 h-5"})})]}),_.length>0&&y&&y.comments&&y.comments.length>0?j.jsxs("div",{className:"text-sm",style:{color:c.neutral[600]},children:[j.jsxs("strong",{style:{color:c.neutral[800]},children:[(null==(d=y.comments[0].user)?void 0:d.nickname)||"User",":"]})," ",y.comments[0].content,y.comments.length>1&&j.jsx("span",{className:"text-xs ml-2",style:{color:c.neutral[400]},children:"...和更多"})]}):_.length>0?j.jsxs("div",{className:"text-sm",style:{color:c.neutral[600]},children:[j.jsxs("strong",{style:{color:c.neutral[800]},children:[(null==(m=_[0].user)?void 0:m.nickname)||"User",":"]})," ",_[0].content,_.length>1&&j.jsx("span",{className:"text-xs ml-2",style:{color:c.neutral[400]},children:"...和更多"})]}):j.jsx("p",{className:"text-sm",style:{color:c.neutral[500]},children:"暂无留言，点击查看或添加。"})]})]}),j.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 z-10 max-w-md mx-auto backdrop-blur-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:`${o.large}, inset 0 1px 0 rgba(255, 255, 255, 0.8)`},children:O?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${c.neutral[300]} 0%, ${c.neutral[400]} 100%)`,color:c.neutral[600]},disabled:!0,children:"👑 你是发起人"}):M?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${c.neutral[300]} 0%, ${c.neutral[400]} 100%)`,color:c.neutral[600]},disabled:!0,children:"⏰ 活动已开始"}):L?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg text-white transition-all duration-300 hover:scale-[1.02] active:scale-95 disabled:opacity-50",style:{background:E?`linear-gradient(135deg, ${c.neutral[400]} 0%, ${c.neutral[500]} 100%)`:`linear-gradient(135deg, ${c.primary[500]} 0%, ${c.secondary[600]} 100%)`,boxShadow:E?o.soft:o.medium},disabled:E,onClick:async()=>{if(v&&y){$(!0);try{await new Promise((e=>setTimeout(e,1e3)));const e={activityId:y.id,userId:v.openid,joinTime:new Date,user:v};N([...w,e]),k(!0),h("报名成功！")}catch(e){u("报名失败，请重试")}finally{$(!1)}}},children:E?"⏳ 处理中...":"🚀 立即报名"}):I?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg text-white transition-all duration-300 hover:scale-[1.02] active:scale-95 disabled:opacity-50",style:{background:E?`linear-gradient(135deg, ${c.neutral[300]} 0%, ${c.neutral[400]} 100%)`:`linear-gradient(135deg, ${c.error.primary} 0%, ${c.error.secondary} 100%)`,boxShadow:E?o.soft:o.medium},disabled:E,onClick:async()=>{if(v&&y&&window.confirm("确定要取消报名吗？")){$(!0);try{await new Promise((e=>setTimeout(e,1e3))),N(w.filter((e=>e.userId!==v.openid))),k(!1),h("已取消报名")}catch(e){u("取消失败，请重试")}finally{$(!1)}}},children:E?"⏳ 处理中...":"❌ 取消报名"}):D?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${c.warning.soft} 0%, ${c.warning.subtle} 100%)`,color:c.warning.primary},disabled:!0,children:"🈵 已满员"}):S&&!O?j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg text-white transition-all duration-300",style:{background:`linear-gradient(135deg, ${c.success.primary} 0%, ${c.success.secondary} 100%)`,boxShadow:o.soft},disabled:!0,children:"✅ 已报名"}):j.jsx("button",{className:"w-full py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${c.neutral[300]} 0%, ${c.neutral[400]} 100%)`,color:c.neutral[600]},disabled:!0,children:"🚫 暂不可操作"})})]})}},Symbol.toStringTag,{value:"Module"}));export{Oe as A,Te as C,Re as E,Me as G,It as M,Ee as R,Pe as S,yt as T,st as U,Ue as V,rt as Y,_,Fe as a,He as b,bt as c,Le as d,Qe as e,ut as f,O as g,Je as h,$e as i,j,at as k,tt as l,Be as m,Ce as n,Jt as o,R as p,nr as q,Nt as r,We as u};

import{a as e,b as r,j as a,f as s}from"./activity-SV2nIvCU.js";import{u as t,e as l,r as n}from"./router-vendor-Cs108294.js";import{f as i,s as d,c as o}from"./utils-BEM4FbqU.js";import"./react-vendor-BRaCMJ4j.js";import"./state-vendor-DHqOUJve.js";const c=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",...e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),g=({title:e,onBack:r})=>a.jsx("div",{className:"sticky top-0 z-10 mb-6 backdrop-blur-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:d.medium},children:a.jsx("div",{className:"px-6 py-4",children:a.jsxs("div",{className:"relative flex items-center justify-center",children:[r&&a.jsx("button",{onClick:r,className:"absolute left-0 p-2 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95",style:{background:`linear-gradient(135deg, ${o.neutral[100]} 0%, ${o.neutral[200]} 100%)`,color:o.primary[600]},children:a.jsx(c,{})}),a.jsxs("h1",{className:"text-xl font-bold bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${o.primary[600]} 0%, ${o.secondary[600]} 100%)`},children:["📋 ",e]})]})})}),u=({title:e,isActive:r,onClick:s})=>a.jsx("button",{onClick:s,className:"flex-1 py-4 px-4 text-center text-sm font-bold rounded-t-2xl transition-all duration-300 "+(r?"text-white":""),style:{background:r?`linear-gradient(135deg, ${o.primary[500]} 0%, ${o.secondary[600]} 100%)`:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",color:r?"white":o.neutral[600],borderBottom:r?"none":`2px solid ${o.neutral[200]}`},children:e}),x=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 mb-4",...e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776M9 12.75v6m3-6v6m3-6v6M3.27 19.745c-.218.218-.53.322-.877.322H2.25a.75.75 0 01-.75-.75V11.166c0-.47.162-.92.468-1.282A1.5 1.5 0 013 9.523v10.222zM20.73 19.745c.218.218.53.322.877.322h.143a.75.75 0 00.75-.75V11.166c0-.47-.162-.92-.468-1.282A1.5 1.5 0 0021 9.523v10.222z"})}),m=({message:e})=>a.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 rounded-2xl backdrop-blur-sm mx-6",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",boxShadow:d.card},children:[a.jsx("div",{style:{color:o.neutral[400]},children:a.jsx(x,{})}),a.jsx("p",{className:"text-lg font-semibold",style:{color:o.neutral[600]},children:e})]}),b=()=>a.jsxs("div",{className:"p-6 rounded-2xl mb-4 animate-pulse backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:d.soft},children:[a.jsx("div",{className:"h-6 rounded-xl w-3/4 mb-3",style:{background:`linear-gradient(135deg, ${o.neutral[200]} 0%, ${o.neutral[300]} 100%)`}}),a.jsx("div",{className:"h-4 rounded-lg w-1/2 mb-2",style:{background:`linear-gradient(135deg, ${o.neutral[200]} 0%, ${o.neutral[300]} 100%)`}}),a.jsx("div",{className:"h-4 rounded-lg w-1/3 mb-4",style:{background:`linear-gradient(135deg, ${o.neutral[200]} 0%, ${o.neutral[300]} 100%)`}}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${o.neutral[200]} 0%, ${o.neutral[300]} 100%)`}}),a.jsx("div",{className:"h-4 rounded-lg w-16",style:{background:`linear-gradient(135deg, ${o.neutral[200]} 0%, ${o.neutral[300]} 100%)`}})]}),a.jsx("div",{className:"h-8 rounded-xl w-20",style:{background:`linear-gradient(135deg, ${o.neutral[300]} 0%, ${o.neutral[400]} 100%)`}})]})]}),h=()=>{const o=t(),[c]=l(),{user:x}=e(),{activities:h,isLoadingActivities:j}=r(),p="joined"===c.get("type")?"joined":"hosted",[v,k]=n.useState(p),[y,f]=n.useState(!0),[w,N]=n.useState([]);n.useEffect((()=>{if(f(!0),x&&h){let e=[];e="hosted"===v?h.filter((e=>e.hostId===x.openid)):h.filter((e=>{var r;return(null==(r=e.participantIds)?void 0:r.includes(x.openid))&&e.hostId!==x.openid})),N(e.sort(((e,r)=>new Date(r.datetime).getTime()-new Date(e.datetime).getTime())))}f(!1)}),[v,x,h]);return x?a.jsxs("div",{className:"flex flex-col h-screen",style:{background:"linear-gradient(180deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.8) 100%)"},children:[a.jsx(g,{title:"我的活动",onBack:()=>o("/profile")}),a.jsxs("div",{className:"flex border-b backdrop-blur-sm mx-6",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",borderColor:"rgba(255, 255, 255, 0.5)",borderRadius:"1rem 1rem 0 0"},children:[a.jsx(u,{title:"🚀 我发起的",isActive:"hosted"===v,onClick:()=>k("hosted")}),a.jsx(u,{title:"🤝 我参与的",isActive:"joined"===v,onClick:()=>k("joined")})]}),a.jsx("div",{className:"flex-1 overflow-y-auto mx-6 rounded-b-2xl backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:d.card},children:y||j?a.jsxs("div",{className:"space-y-4 p-6",children:[a.jsx(b,{}),a.jsx(b,{})]}):0===w.length?a.jsx("div",{className:"pt-10",children:a.jsx(m,{message:"hosted"===v?"你还没有发起过活动":"你还没有参与过活动"})}):a.jsx("div",{className:"p-6 space-y-4",children:w.map((e=>a.jsx(s,{activity:e,onClick:()=>o(`/activity/${e.id}`)},e.id)))})})]}):(i("请先登录"),o("/login",{replace:!0}),null)};export{h as default};

import{a as e}from"./state-vendor-DHqOUJve.js";import{g as i,p as t,d as s}from"./activity-SV2nIvCU.js";const a=[{openid:"user1",nickname:"RockClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RockClimber",gearTags:["SHOES"],createdAt:new Date,role:"user",isBanned:!1,climbingAge:3,city:"北京",frequentlyVisitedGyms:["岩时攀岩馆（望京店）"],climbingPreferences:["BOULDERING"]},{openid:"user2",nickname:"NewbieClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=NewbieClimber",gearTags:[],createdAt:new Date,role:"user",isBanned:!1,climbingAge:1,city:"上海"},{openid:"user3",nickname:"AdminUser",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AdminUser",gearTags:[],createdAt:new Date,role:"admin",isBanned:!1},{openid:"user4",nickname:"BannedUserExample",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=BannedUserExample",gearTags:[],createdAt:new Date,role:"user",isBanned:!0}],r=e()(i(t((e=>({user:null,allUsers:a.map((e=>({...e,climbingAge:e.climbingAge,introduction:e.introduction,city:e.city,frequentlyVisitedGyms:e.frequentlyVisitedGyms||[],climbingPreferences:e.climbingPreferences||[],isBanned:e.isBanned||!1,role:e.role||"user",notificationPreferences:e.notificationPreferences||s}))),isAuthenticated:!1,setUser:i=>e({user:i?{...i,climbingAge:i.climbingAge,introduction:i.introduction,city:i.city,frequentlyVisitedGyms:i.frequentlyVisitedGyms||[],climbingPreferences:i.climbingPreferences||[],isBanned:i.isBanned||!1,role:i.role||"user",notificationPreferences:i.notificationPreferences||s}:null,isAuthenticated:!!i}),setAllUsers:i=>e({allUsers:i.map((e=>({...e,climbingAge:e.climbingAge,introduction:e.introduction,city:e.city,frequentlyVisitedGyms:e.frequentlyVisitedGyms||[],climbingPreferences:e.climbingPreferences||[],isBanned:e.isBanned||!1,role:e.role||"user",notificationPreferences:e.notificationPreferences||s})))}),updateUserStatus:(i,t)=>e((e=>({allUsers:e.allUsers.map((e=>e.openid===i?{...e,...t,updatedAt:new Date}:e)),user:e.user&&e.user.openid===i?{...e.user,...t,updatedAt:new Date}:e.user}))),updateUserPreferences:i=>e((e=>e.user?{user:{...e.user,notificationPreferences:{...e.user.notificationPreferences||s,...i},updatedAt:new Date}}:{})),updateUserProfile:i=>e((e=>{if(e.user){const t={...e.user,...i,updatedAt:new Date},s=e.allUsers.map((e=>e.openid===t.openid?t:e));return{user:t,allUsers:s}}return{}})),logout:()=>e({user:null,isAuthenticated:!1}),activities:[],currentActivity:null,setActivities:i=>e({activities:i}),setCurrentActivity:i=>e({currentActivity:i}),addActivity:i=>e((e=>({activities:[i,...e.activities]}))),updateActivity:(i,t)=>e((e=>({activities:e.activities.map((e=>e.id===i?{...e,...t}:e))}))),removeActivity:i=>e((e=>({activities:e.activities.filter((e=>e.id!==i))}))),announcements:[],loading:!1,error:null,setAnnouncements:i=>e({announcements:i}),setLoading:i=>e({loading:i}),setError:i=>e({error:i}),activityListSearchText:"",activityListSelectedTypes:[],activityListSelectedGrades:[],setActivityListSearchText:i=>e({activityListSearchText:i}),setActivityListSelectedTypes:i=>e({activityListSelectedTypes:i}),setActivityListSelectedGrades:i=>e({activityListSelectedGrades:i}),resetActivityListFilters:()=>e({activityListSearchText:"",activityListSelectedTypes:[],activityListSelectedGrades:[]})})),{name:"climberdaz-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,activityListSearchText:e.activityListSearchText,activityListSelectedTypes:e.activityListSelectedTypes,activityListSelectedGrades:e.activityListSelectedGrades,allUsers:e.allUsers})})));export{r as u};

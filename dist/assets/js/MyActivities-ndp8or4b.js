import{h as e,u as a,e as t,j as r}from"./auth-features-B9i09fKj.js";import{u as s,e as l,r as i}from"./router-DIp0qzM7.js";import{A as n}from"./activity-features-BeCPKsHJ.js";import{i as d,s as o,c}from"./utils-C8L9ZeeV.js";import"./react-core-DJd1KkWy.js";import"./state-Dl9MXZu6.js";import"./datetime-C5xEksKA.js";import"./http-client-CnGGTTUv.js";import"./notifications-DK5Y3Ipx.js";import"./storage-BRXjPTYW.js";const g=e=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",...e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),u=({title:e,onBack:a})=>r.jsx("div",{className:"sticky top-0 z-10 mb-6 backdrop-blur-lg",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:o.medium},children:r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"relative flex items-center justify-center",children:[a&&r.jsx("button",{onClick:a,className:"absolute left-0 p-2 rounded-xl transition-all duration-200 hover:scale-110 active:scale-95",style:{background:`linear-gradient(135deg, ${c.neutral[100]} 0%, ${c.neutral[200]} 100%)`,color:c.primary[600]},children:r.jsx(g,{})}),r.jsxs("h1",{className:"text-xl font-bold bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${c.primary[600]} 0%, ${c.secondary[600]} 100%)`},children:["📋 ",e]})]})})}),m=({title:e,isActive:a,onClick:t})=>r.jsx("button",{onClick:t,className:"flex-1 py-4 px-4 text-center text-sm font-bold rounded-t-2xl transition-all duration-300 "+(a?"text-white":""),style:{background:a?`linear-gradient(135deg, ${c.primary[500]} 0%, ${c.secondary[600]} 100%)`:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",color:a?"white":c.neutral[600],borderBottom:a?"none":`2px solid ${c.neutral[200]}`},children:e}),x=e=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16 mb-4",...e,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776M9 12.75v6m3-6v6m3-6v6M3.27 19.745c-.218.218-.53.322-.877.322H2.25a.75.75 0 01-.75-.75V11.166c0-.47.162-.92.468-1.282A1.5 1.5 0 013 9.523v10.222zM20.73 19.745c.218.218.53.322.877.322h.143a.75.75 0 00.75-.75V11.166c0-.47-.162-.92-.468-1.282A1.5 1.5 0 0021 9.523v10.222z"})}),b=({message:e})=>r.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-12 rounded-2xl backdrop-blur-sm mx-6",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",boxShadow:o.card},children:[r.jsx("div",{style:{color:c.neutral[400]},children:r.jsx(x,{})}),r.jsx("p",{className:"text-lg font-semibold",style:{color:c.neutral[600]},children:e})]}),h=()=>r.jsxs("div",{className:"p-6 rounded-2xl mb-4 animate-pulse backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:o.soft},children:[r.jsx("div",{className:"h-6 rounded-xl w-3/4 mb-3",style:{background:`linear-gradient(135deg, ${c.neutral[200]} 0%, ${c.neutral[300]} 100%)`}}),r.jsx("div",{className:"h-4 rounded-lg w-1/2 mb-2",style:{background:`linear-gradient(135deg, ${c.neutral[200]} 0%, ${c.neutral[300]} 100%)`}}),r.jsx("div",{className:"h-4 rounded-lg w-1/3 mb-4",style:{background:`linear-gradient(135deg, ${c.neutral[200]} 0%, ${c.neutral[300]} 100%)`}}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${c.neutral[200]} 0%, ${c.neutral[300]} 100%)`}}),r.jsx("div",{className:"h-4 rounded-lg w-16",style:{background:`linear-gradient(135deg, ${c.neutral[200]} 0%, ${c.neutral[300]} 100%)`}})]}),r.jsx("div",{className:"h-8 rounded-xl w-20",style:{background:`linear-gradient(135deg, ${c.neutral[300]} 0%, ${c.neutral[400]} 100%)`}})]})]}),j=()=>{const c=s(),[g]=l(),{user:x}=e(),{activities:j,isLoadingActivities:p}=a(),{fetchActivities:v}=t(),f="joined"===g.get("type")?"joined":"hosted",[k,y]=i.useState(f),[w,N]=i.useState(!0),[$,A]=i.useState([]);return i.useEffect((()=>{if(N(!0),0!==j.length||p||v().catch((e=>{})),x&&j){let e=[];e="hosted"===k?j.filter((e=>e.hostId===x.openid)):j.filter((e=>e.participantIds?.includes(x.openid)&&e.hostId!==x.openid)),A(e.sort(((e,a)=>new Date(a.datetime).getTime()-new Date(e.datetime).getTime())))}N(!1)}),[k,x,j,p,v]),x?r.jsxs("div",{className:"flex flex-col h-screen",style:{background:"linear-gradient(180deg, rgba(248, 250, 252, 0.9) 0%, rgba(241, 245, 249, 0.8) 100%)"},children:[r.jsx(u,{title:"我的活动",onBack:()=>c("/profile")}),r.jsxs("div",{className:"flex border-b backdrop-blur-sm mx-6",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",borderColor:"rgba(255, 255, 255, 0.5)",borderRadius:"1rem 1rem 0 0"},children:[r.jsx(m,{title:"🚀 我发起的",isActive:"hosted"===k,onClick:()=>y("hosted")}),r.jsx(m,{title:"🤝 我参与的",isActive:"joined"===k,onClick:()=>y("joined")})]}),r.jsx("div",{className:"flex-1 overflow-y-auto mx-6 rounded-b-2xl backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%)",boxShadow:o.card},children:w||p?r.jsxs("div",{className:"space-y-4 p-6",children:[r.jsx(h,{}),r.jsx(h,{})]}):0===$.length?r.jsx("div",{className:"pt-10",children:r.jsx(b,{message:"hosted"===k?"你还没有发起过活动":"你还没有参与过活动"})}):r.jsx("div",{className:"p-6 space-y-4",children:$.map((e=>r.jsx(n,{activity:e,onClick:()=>c(`/activity/${e.id}`)},e.id)))})})]}):(d("请先登录"),c("/login",{replace:!0}),null)};export{j as default};

import{n as E,i as t,G as s,A as d,C as m,D as i,M as u,u as C,o as S,r as o,p as g,q as v,k as y,S as D,E as w,j as e}from"./index-JcghwglV.js";const c=[{openid:"user1",nickname:"RockClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RockClimber",level:5,gearTags:[s.SHOES,s.HARNESS,s.CHALK],createdAt:new Date("2024-01-15"),climbingAge:3,introduction:"çƒ­çˆ±æ”€å²©çš„ç¨‹åºå‘˜ï¼Œå–œæ¬¢æŒ‘æˆ˜V6-V8çš„çº¿è·¯",city:"åŒ—äº¬",frequentlyVisitedGyms:["å²©æ—¶æ”€å²©é¦†ï¼ˆæœ›äº¬åº—ï¼‰","MWAæ”€å²©é¦†"],climbingPreferences:[t.BOULDERING,t.LEAD_CLIMBING],notificationPreferences:E,role:"user",isBanned:!1},{openid:"user2",nickname:"NewbieClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=NewbieClimber",level:2,gearTags:[s.SHOES],createdAt:new Date("2024-03-10"),climbingAge:1,introduction:"æ”€å²©æ–°æ‰‹ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°ä¸€èµ·å­¦ä¹ çš„æœ‹å‹",city:"ä¸Šæµ·",frequentlyVisitedGyms:["å³­å£èŠ­è•¾æ”€å²©é¦†"],climbingPreferences:[t.BOULDERING,t.TRAINING],notificationPreferences:E,role:"user",isBanned:!1},{openid:"user3",nickname:"AdminUser",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AdminUser",level:8,gearTags:[s.SHOES,s.HARNESS,s.ROPE,s.QUICKDRAWS,s.BELAY_DEVICE],createdAt:new Date("2023-12-01"),climbingAge:5,introduction:"å¹³å°ç®¡ç†å‘˜ï¼Œèµ„æ·±æ”€å²©çˆ±å¥½è€…",city:"æ·±åœ³",frequentlyVisitedGyms:["KAILASæ”€å²©é¦†"],climbingPreferences:[t.BOULDERING,t.LEAD_CLIMBING,t.OUTDOOR],notificationPreferences:E,role:"admin",isBanned:!1},{openid:"user4",nickname:"BannedUserExample",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=BannedUserExample",level:1,gearTags:[],createdAt:new Date("2024-04-01"),climbingAge:0,city:"å¹¿å·",notificationPreferences:E,role:"user",isBanned:!0}];u.MEET_AT_ENTRANCE,t.BOULDERING,i.V3_V5,i.V6_V7,m.AA,d.OPEN,c[0],u.FIRST_COME_FIRST_CLIMB,t.BOULDERING,t.TRAINING,i.V0_V2,m.FREE,d.OPEN,c[1],u.MEET_AT_ENTRANCE,t.LEAD_CLIMBING,t.TRAINING,i.YDS_5_9_5_10D,i.YDS_5_11A_5_11D,m.HOST_TREAT,d.OPEN,c[2],u.MEET_AT_ENTRANCE,t.OUTDOOR,i.YDS_5_5_5_8,i.YDS_5_9_5_10D,m.AA,d.FULL,c[0],u.FIRST_COME_FIRST_CLIMB,t.BOULDERING,i.V0_V2,i.V3_V5,m.AA,d.COMPLETED,c[1];const L=()=>{const A=C(),{setUser:h}=S(),[N,b]=o.useState(!1),[n,I]=o.useState(""),[r,p]=o.useState(null),_=o.useCallback(l=>{const a=l.trim();return a?a.length<g.NICKNAME.MIN_LENGTH?`æ˜µç§°è‡³å°‘${g.NICKNAME.MIN_LENGTH}ä¸ªå­—ç¬¦`:a.length>g.NICKNAME.MAX_LENGTH?`æ˜µç§°æœ€å¤š${g.NICKNAME.MAX_LENGTH}ä¸ªå­—ç¬¦`:null:"è¯·è¾“å…¥æ˜µç§°"},[]),M=o.useCallback(l=>{const a=l.target.value;I(a),r&&p(null)},[r]),T=o.useCallback(async l=>{l.preventDefault();const a=_(n);if(a){p(a),v(a);return}p(null),b(!0);try{await new Promise(x=>setTimeout(x,1e3));const f={openid:`mock_${Date.now()}`,nickname:n.trim(),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.trim().replace(/\s/g,"_")}`,level:Math.floor(Math.random()*5)+1,gearTags:[],createdAt:new Date,role:"user",isBanned:!1,notificationPreferences:c[0].notificationPreferences};h(f),y(D.LOGIN_SUCCESS),setTimeout(()=>A("/",{replace:!0}),500)}catch(f){const x=f instanceof Error?f.message:w.SERVER_ERROR;p(x),v(x)}finally{b(!1)}},[n,_,h,A]);return e.jsx("div",{className:"login-page flex items-center justify-center min-h-screen bg-gray-100 p-4",children:e.jsxs("div",{className:"login-container bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"app-logo text-center mb-8",children:[e.jsx("div",{className:"logo-icon text-6xl mb-2",role:"img","aria-label":"æ”€å²©å›¾æ ‡",children:"ğŸ§—"}),e.jsx("h1",{className:"app-name text-3xl font-bold text-gray-800",children:"ClimberDaz"}),e.jsx("p",{className:"app-tagline text-gray-600",children:"æ‰¾åˆ°ä½ çš„æ”€å²©æ­å­"})]}),e.jsxs("form",{onSubmit:T,className:"login-form space-y-6",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"æ˜µç§°"}),e.jsx("input",{type:"text",id:"nickname",name:"nickname",placeholder:"è¯·è¾“å…¥ä½ çš„æ˜µç§°",disabled:N,value:n,onChange:M,"aria-invalid":!!r,"aria-describedby":r?"nickname-error":void 0,className:`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm transition-colors ${r?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,maxLength:g.NICKNAME.MAX_LENGTH}),r&&e.jsx("p",{id:"nickname-error",className:"text-red-500 text-xs mt-1",role:"alert",children:r})]}),e.jsx("button",{type:"submit",disabled:N||!n.trim(),className:"login-button w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:N?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ç™»å½•ä¸­..."]}):"ç«‹å³å¼€å§‹"})]}),e.jsxs("div",{className:"login-tips text-center mt-8 text-sm text-gray-500",children:[e.jsx("p",{children:"ğŸ’¡ çœŸå®ç‰ˆæœ¬å°†ä½¿ç”¨å¾®ä¿¡æˆæƒç™»å½•"}),e.jsx("p",{children:"ç°åœ¨åªéœ€è¾“å…¥æ˜µç§°å³å¯ä½“éªŒ"})]})]})})};export{L as default};

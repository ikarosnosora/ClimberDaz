import{I as c,J as l,K as d,n as s}from"./index-JcghwglV.js";const o=[{openid:"user1",nickname:"RockClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=RockClimber",gearTags:["SHOES"],createdAt:new Date,role:"user",isBanned:!1,climbingAge:3,city:"北京",frequentlyVisitedGyms:["岩时攀岩馆（望京店）"],climbingPreferences:["BOULDERING"]},{openid:"user2",nickname:"NewbieClimber",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=NewbieClimber",gearTags:[],createdAt:new Date,role:"user",isBanned:!1,climbingAge:1,city:"上海"},{openid:"user3",nickname:"AdminUser",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AdminUser",gearTags:[],createdAt:new Date,role:"admin",isBanned:!1},{openid:"user4",nickname:"BannedUserExample",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=BannedUserExample",gearTags:[],createdAt:new Date,role:"user",isBanned:!0}],y=c()(l(d(t=>({user:null,allUsers:o.map(e=>({...e,climbingAge:e.climbingAge,introduction:e.introduction,city:e.city,frequentlyVisitedGyms:e.frequentlyVisitedGyms||[],climbingPreferences:e.climbingPreferences||[],isBanned:e.isBanned||!1,role:e.role||"user",notificationPreferences:e.notificationPreferences||s})),isAuthenticated:!1,setUser:e=>t({user:e?{...e,climbingAge:e.climbingAge,introduction:e.introduction,city:e.city,frequentlyVisitedGyms:e.frequentlyVisitedGyms||[],climbingPreferences:e.climbingPreferences||[],isBanned:e.isBanned||!1,role:e.role||"user",notificationPreferences:e.notificationPreferences||s}:null,isAuthenticated:!!e}),setAllUsers:e=>t({allUsers:e.map(i=>({...i,climbingAge:i.climbingAge,introduction:i.introduction,city:i.city,frequentlyVisitedGyms:i.frequentlyVisitedGyms||[],climbingPreferences:i.climbingPreferences||[],isBanned:i.isBanned||!1,role:i.role||"user",notificationPreferences:i.notificationPreferences||s}))}),updateUserStatus:(e,i)=>t(r=>({allUsers:r.allUsers.map(a=>a.openid===e?{...a,...i,updatedAt:new Date}:a),user:r.user&&r.user.openid===e?{...r.user,...i,updatedAt:new Date}:r.user})),updateUserPreferences:e=>t(i=>i.user?{user:{...i.user,notificationPreferences:{...i.user.notificationPreferences||s,...e},updatedAt:new Date}}:{}),updateUserProfile:e=>t(i=>{if(i.user){const r={...i.user,...e,updatedAt:new Date},a=i.allUsers.map(n=>n.openid===r.openid?r:n);return{user:r,allUsers:a}}return{}}),logout:()=>t({user:null,isAuthenticated:!1}),activities:[],currentActivity:null,setActivities:e=>t({activities:e}),setCurrentActivity:e=>t({currentActivity:e}),addActivity:e=>t(i=>({activities:[e,...i.activities]})),updateActivity:(e,i)=>t(r=>({activities:r.activities.map(a=>a.id===e?{...a,...i}:a)})),removeActivity:e=>t(i=>({activities:i.activities.filter(r=>r.id!==e)})),announcements:[],loading:!1,error:null,setAnnouncements:e=>t({announcements:e}),setLoading:e=>t({loading:e}),setError:e=>t({error:e}),activityListSearchText:"",activityListSelectedTypes:[],activityListSelectedGrades:[],setActivityListSearchText:e=>t({activityListSearchText:e}),setActivityListSelectedTypes:e=>t({activityListSelectedTypes:e}),setActivityListSelectedGrades:e=>t({activityListSelectedGrades:e}),resetActivityListFilters:()=>t({activityListSearchText:"",activityListSelectedTypes:[],activityListSelectedGrades:[]})}),{name:"climberdaz-storage",partialize:t=>({user:t.user,isAuthenticated:t.isAuthenticated,activityListSearchText:t.activityListSearchText,activityListSelectedTypes:t.activityListSelectedTypes,activityListSelectedGrades:t.activityListSelectedGrades,allUsers:t.allUsers})})));export{y as u};
